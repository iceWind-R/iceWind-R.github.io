<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Thorine</title>
  
  <subtitle>凡是过往，皆为序章</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://icewind-r.github.io/"/>
  <updated>2020-07-20T08:32:47.168Z</updated>
  <id>http://icewind-r.github.io/</id>
  
  <author>
    <name>大雪初晴丶</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://icewind-r.github.io/2020/07/20/hello-world/"/>
    <id>http://icewind-r.github.io/2020/07/20/hello-world/</id>
    <published>2020-07-20T08:32:47.168Z</published>
    <updated>2020-07-20T08:32:47.168Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Pyhthon虚拟环境</title>
    <link href="http://icewind-r.github.io/2020/07/18/Pyhthon%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
    <id>http://icewind-r.github.io/2020/07/18/Pyhthon%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</id>
    <published>2020-07-18T05:18:10.000Z</published>
    <updated>2020-07-18T05:20:10.760Z</updated>
    
    <content type="html"><![CDATA[<p>Python学习还有一个很重要的知识点便是虚拟环境的使用。</p><a id="more"></a><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Python学习还有一个很重要的知识点便是虚拟环境的使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_09(CrawlSpider)</title>
    <link href="http://icewind-r.github.io/2020/07/09/Python%E7%88%AC%E8%99%AB-09/"/>
    <id>http://icewind-r.github.io/2020/07/09/Python%E7%88%AC%E8%99%AB-09/</id>
    <published>2020-07-09T07:43:20.000Z</published>
    <updated>2020-07-09T23:54:34.409Z</updated>
    
    <content type="html"><![CDATA[<p>本篇是python中 <strong>CrawlSpider</strong> 的介绍，还有<strong>Scrapy Shell</strong>、<strong>request 和 response</strong> 对象、<strong>发送POST请求</strong> 等。</p><a id="more"></a><hr><h1 id="CrawlSpider"><a href="#CrawlSpider" class="headerlink" title="CrawlSpider"></a>CrawlSpider</h1><p>在之前的爬虫中定义了新的功能，可以定义爬取url的规则，以后scrapy碰到满足条件的url都进行爬取，而不用手动的<code>yield Request</code>。</p><h2 id="创建CrawlSpider"><a href="#创建CrawlSpider" class="headerlink" title="创建CrawlSpider"></a>创建CrawlSpider</h2><p>之前创建爬虫的方式是通过 <code>scrapy genspider [爬虫名] [域名]</code> 的方式创建的。如果想要创建<code>CrawlSpider</code>爬虫，则通过以下命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider -t crawl [爬虫名] [域名]</span><br></pre></td></tr></table></figure><h2 id="LinkExtractors链接提取器"><a href="#LinkExtractors链接提取器" class="headerlink" title="LinkExtractors链接提取器"></a>LinkExtractors链接提取器</h2><p>使用<code>LinkExtractors</code> 可以不用我们手动提取想要的URL，然后发送请求。这些工作可以交给<code>LinkExtractors</code> ，它会在所有爬的页面中找到满足规则的URL，实现自动爬取。下面是简单介绍：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">scrapy</span>.<span class="title">linkextractors</span>.<span class="title">LinkExtractor</span><span class="params">(</span></span></span><br><span class="line"><span class="class"><span class="params">    allow = <span class="params">()</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    deny = <span class="params">()</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    allow_domains = <span class="params">()</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    deny_domains = <span class="params">()</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    deny_extensions = None,</span></span></span><br><span class="line"><span class="class"><span class="params">    restrict_xpaths = <span class="params">()</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    tags = <span class="params">(<span class="string">'a'</span>, <span class="string">'area'</span>)</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    attrs = <span class="params">(<span class="string">'href'</span>)</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">    canonicalize = True,</span></span></span><br><span class="line"><span class="class"><span class="params">    unique = True,</span></span></span><br><span class="line"><span class="class"><span class="params">    process_value = None</span></span></span><br><span class="line"><span class="class"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>主要参数讲解：</p><ul><li>allow：允许的URL，所有满足里面正则表达式的URL都会被提取</li><li>allow_domains：允许的域名，只有这里指定的域名的URL才会被提取</li></ul><h2 id="Rule规则类"><a href="#Rule规则类" class="headerlink" title="Rule规则类"></a>Rule规则类</h2><p>定义爬虫的规则类。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">scrapy</span>.<span class="title">spiders</span>.<span class="title">Rule</span><span class="params">(</span></span></span><br><span class="line"><span class="class"><span class="params">    link_extractor,</span></span></span><br><span class="line"><span class="class"><span class="params">    callback = None,</span></span></span><br><span class="line"><span class="class"><span class="params">    cb_kwargs = None,</span></span></span><br><span class="line"><span class="class"><span class="params">    follow = None,</span></span></span><br><span class="line"><span class="class"><span class="params">    process_links = None,</span></span></span><br><span class="line"><span class="class"><span class="params">    process_request = None</span></span></span><br><span class="line"><span class="class"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>主要参数讲解：</p><ul><li>link_extractor：一个<code>LinkExtractor</code>对象，用于定义爬取规则。</li><li>callback：满足规则的URL，应该执行哪个回调函数。</li><li>follow：根据该规则，指定response中提取的链接是否需要跟进。</li><li>process_links：从link_extractor中获取的链接会传递给这个函数，用来过滤不需要爬取的链接。</li></ul><h1 id="Scrapy-Shell"><a href="#Scrapy-Shell" class="headerlink" title="Scrapy Shell"></a>Scrapy Shell</h1><p>可以简单的运行Xpath、BeautifulSoup、正则表达式或CSS选择器等，来判断我们的提取规则是否正确。</p><p>在 cmd（或pycharm的Terminal）进入scrapy爬虫的工程目录（可以读取对应项目里的配置信息，若不进入，则只能运行一些通用测试，平常使用足够），运行下述代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy shell 域名</span><br></pre></td></tr></table></figure><h1 id="scrapy-中的-request-和-response-对象"><a href="#scrapy-中的-request-和-response-对象" class="headerlink" title="scrapy 中的 request 和 response 对象"></a>scrapy 中的 request 和 response 对象</h1><h2 id="Request对象"><a href="#Request对象" class="headerlink" title="Request对象"></a>Request对象</h2><p>request对象在我们写爬虫，爬取一页的数据，需要重新发送一个请求的时候调用。这个类需要传递一些参数，其中比较常用的参数有：</p><ul><li>url：发送请求的url</li><li>callback：在下载器完成相应的下载任务后执行的回调函数</li><li>method：默认为GET方法</li><li>headers：请求头，固定部分放入setting.py 中，需要改变的再可在发送时指定</li><li>meta：比较常用，用于在不同的请求之间传递数据</li><li>encoding：默认utf-8</li><li>dot_filter：表示不由调度器过滤，在执行多次重复的请求时用的比较多</li><li>errback：在发生错误时执行的函数</li></ul><h2 id="Response对象"><a href="#Response对象" class="headerlink" title="Response对象"></a>Response对象</h2><p>Response对象一般是由scrapy自动生成的，因此我们只需关系如何使用。它有很多属性，主要用来提取数据，依次介绍：</p><ul><li><p>meta：从请求穿过来的meta属性，可以用来保持多个请求之间的数据连接</p></li><li><p>encoding：返回字符串编码和解码格式</p></li><li><p>text：将返回来的数据作为Unicode字符串返回</p></li><li><p>body：将返回来的数据作为Bytes字符串返回</p></li><li><p>xpath：xpath选择器</p></li><li><p>css：css选择器</p></li></ul><h1 id="发送POST请求"><a href="#发送POST请求" class="headerlink" title="发送POST请求"></a>发送POST请求</h1><p>有时我们想要在请求数据的时候发送POST请求，那么这时候需要使用 <code>Request</code> 的子类 <code>FormRequest</code> 来实现（专门为表单提交设计的类）。如果想要在爬虫一开始的时候就发送POST请求，那么需要在爬虫类中重写 <code>start_requests(self)</code> 方法，并且不再调用 <code>start_url</code> 里的URL。</p><h2 id="模拟登录"><a href="#模拟登录" class="headerlink" title="模拟登录"></a>模拟登录</h2><h3 id="案例一：模拟人人网登录"><a href="#案例一：模拟人人网登录" class="headerlink" title="案例一：模拟人人网登录"></a>案例一：模拟人人网登录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RenrenSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'renren'</span></span><br><span class="line">    allowed_domains = [<span class="string">'renren.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://renren.com/'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 模拟登录，重写该方法(因为在父类中，该方法默认发送GET请求)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        url = <span class="string">'http://www.renren.com/PLogin.do'</span></span><br><span class="line">        data = &#123;<span class="string">'email'</span>:<span class="string">'13287857692'</span>, <span class="string">'password'</span>:<span class="string">'dongao123'</span>&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 专门发送POST请求，并且携带表单数据</span></span><br><span class="line">        request = scrapy.FormRequest(url, formdata = data, callback = self.parse_page)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> request</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_page</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># with open ('renren.html', 'w', encoding='utf-8') as f:</span></span><br><span class="line">        <span class="comment">#     f.write(response.text)</span></span><br><span class="line">        <span class="comment"># 请求只有登录才能访问的个人主页</span></span><br><span class="line">        request = scrapy.Request(url=<span class="string">'http://www.renren.com/974726184/profile'</span>,callback=self.parse_profile)</span><br><span class="line">        <span class="keyword">yield</span> request</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_profile</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'myprofile.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f :</span><br><span class="line">            f.write(response.text)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇是python中 &lt;strong&gt;CrawlSpider&lt;/strong&gt; 的介绍，还有&lt;strong&gt;Scrapy Shell&lt;/strong&gt;、&lt;strong&gt;request 和 response&lt;/strong&gt; 对象、&lt;strong&gt;发送POST请求&lt;/strong&gt; 等。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>The College Entrance Examination in Despair</title>
    <link href="http://icewind-r.github.io/2020/07/07/%E7%BB%9D%E5%A2%83%E9%87%8C%E7%9A%84%E9%AB%98%E8%80%83/"/>
    <id>http://icewind-r.github.io/2020/07/07/%E7%BB%9D%E5%A2%83%E9%87%8C%E7%9A%84%E9%AB%98%E8%80%83/</id>
    <published>2020-07-07T11:32:58.000Z</published>
    <updated>2020-07-09T07:32:24.816Z</updated>
    
    <content type="html"><![CDATA[<p>2020年7月7日~2020年7月8日高考。</p><a id="more"></a><hr><p>今年真是命运多舛的一年，就在今天下午，本应所有高三考生紧张答题的时候，却传来了南方载有考生的大巴车出事，21人死亡。真是令人心痛，最美的年纪，可命运对他们并不公平。</p><blockquote><p>那会难受的想跳河，不过我使劲儿的控制住自己了。</p></blockquote><p>每个人都在努力过好自己的生活，但有些时候，真的很难。</p><p>除了生老病死，其他都是小事。</p><p>生活很难，但请务必坚持。</p><p>有人欢喜有人悲，黑马很多，但考砸的也不会少。</p><blockquote><p>别急着崩溃，以后让你崩溃的事多着呢</p><p>真的崩溃不叫崩溃，那叫绝望。</p></blockquote><p>失常只是正常的一部分，平常心。</p><blockquote><p>试卷，答案往往只有一个，如果没有找到它，那就是不及格。</p><p>但是啊，人生不一样，人生有很多正确答案</p><p>读大学是，不读也是</p><p>读好的是，读所谓的不好的，也是</p><p>热爱运动是，喜欢音乐是，做你想做的事，更是</p><p>不要畏惧，不管这次如何，都不要否定自己的可能性</p><p>挺起胸膛，理直气壮</p><p>人生是一场马拉松，起跑落后一点</p><p>又怎样</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2020年7月7日~2020年7月8日高考。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="http://iceWind-R.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="idea" scheme="http://iceWind-R.github.io/tags/idea/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_08(糗事百科Scrapy爬虫)</title>
    <link href="http://icewind-r.github.io/2020/07/05/Python%E7%88%AC%E8%99%AB-08/"/>
    <id>http://icewind-r.github.io/2020/07/05/Python%E7%88%AC%E8%99%AB-08/</id>
    <published>2020-07-05T02:40:14.000Z</published>
    <updated>2020-07-09T07:11:16.641Z</updated>
    
    <content type="html"><![CDATA[<p>本篇是python实例编写：<strong>糗事百科</strong>，目的是介绍最基础的scrapy框架的写法和运行过程。</p><a id="more"></a><hr><h1 id="功能描述"><a href="#功能描述" class="headerlink" title="功能描述"></a>功能描述</h1><p>目标：获取 糗事百科 所所有信息的作者，url和内容，需要爬取多个页面，/page/1~/page/13。 </p><p>输出：保存到文件中（json格式）</p><h1 id="编写步骤"><a href="#编写步骤" class="headerlink" title="编写步骤"></a>编写步骤</h1><p>编写<strong>spider</strong>处理链接爬取和页面解析，编写<strong>pipelines</strong>处理信息存储</p><h2 id="步骤1：建立工程和Spider模板"><a href="#步骤1：建立工程和Spider模板" class="headerlink" title="步骤1：建立工程和Spider模板"></a>步骤1：建立工程和Spider模板</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\&gt;scrapy startproject qsbk</span><br><span class="line">\&gt;cd BaiduStocks</span><br><span class="line">\&gt;scrapy genspider qsbk_spider qiushibaike.com</span><br></pre></td></tr></table></figure><h2 id="步骤2：编写Spider"><a href="#步骤2：编写Spider" class="headerlink" title="步骤2：编写Spider"></a>步骤2：编写Spider</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"><span class="keyword">from</span> qsbk.items <span class="keyword">import</span> QsbkItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkSpiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'qsbk_spider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'qiushibaike.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://qiushibaike.com/text/page/1/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># selectorList 类型</span></span><br><span class="line">        duanziDivs = response.xpath(<span class="string">"//div[@class='col1 old-style-col1']/div"</span>)</span><br><span class="line"></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> div <span class="keyword">in</span> duanziDivs:</span><br><span class="line">            <span class="comment"># div: Selector类型</span></span><br><span class="line">            <span class="comment"># div.xpath()：selectorList类型</span></span><br><span class="line">            author = div.xpath(<span class="string">".//h2/text()"</span>).get().strip()</span><br><span class="line">            <span class="comment"># get()函数，取到第一个结果（str类型）, get()&lt;=&gt;extract_first()</span></span><br><span class="line">            <span class="comment"># extract(): 提取所有结果组成列表，每个元素是str类型</span></span><br><span class="line">            <span class="comment"># strip(): 去掉前后的空格</span></span><br><span class="line"></span><br><span class="line">            href = div.xpath(<span class="string">'./a/@href'</span>).get() <span class="comment"># 获取a标签内的href的属性值</span></span><br><span class="line">            url = urljoin(self.start_urls[<span class="number">0</span>],href) <span class="comment"># 跳转到详情页</span></span><br><span class="line"></span><br><span class="line">            content = div.xpath(<span class="string">".//div[@class='content']//text()"</span>).extract()</span><br><span class="line">            <span class="comment"># html中该div下有span标签，span中才是内容，//text()直接提取该内容</span></span><br><span class="line"></span><br><span class="line">            content = <span class="string">''</span>.join(content).strip()</span><br><span class="line"></span><br><span class="line">            <span class="comment"># tplt = "&#123;0:&#123;2&#125;&lt;20&#125;\t&#123;1:^50&#125;"</span></span><br><span class="line">            <span class="comment"># print(tplt.format(author,url,chr(12288)))</span></span><br><span class="line">            <span class="comment"># print(content)</span></span><br><span class="line">            <span class="comment"># print('=' * 100)</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># duanzi = &#123;'author':author,'content':content&#125; # 即为一个个的存储项，item，写法如下 ⬇</span></span><br><span class="line">            item = QsbkItem(author=author, content=content)</span><br><span class="line"></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            print(<span class="string">'生成器调用：'</span>,i)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># yield duanzi</span></span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 若不使用生成器，即注释上面的yield item，可使用以下方法</span></span><br><span class="line">            <span class="comment"># items = []</span></span><br><span class="line">            <span class="comment"># items.append(item)</span></span><br><span class="line">            <span class="comment"># return items</span></span><br><span class="line">            <span class="comment"># 返回所有的items=，在pipelines中也可以被解析</span></span><br></pre></td></tr></table></figure><blockquote><p>测试该函数可以注释最后的生成器步骤，取消注释前面的打印函数。</p></blockquote><h3 id="对setting-py的设置"><a href="#对setting-py的设置" class="headerlink" title="对setting.py的设置"></a>对setting.py的设置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user-agent = <span class="string">'Mozilla/5.0'</span> <span class="comment"># 设置头信息</span></span><br><span class="line"></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span> <span class="comment"># 不遵循robots协议</span></span><br><span class="line"></span><br><span class="line">LOG_LEVEL = <span class="string">"WARN"</span> <span class="comment"># 取消warning以下的提示信息，使控制台更干净</span></span><br></pre></td></tr></table></figure><h2 id="步骤3：编写ITEM-Pipelines"><a href="#步骤3：编写ITEM-Pipelines" class="headerlink" title="步骤3：编写ITEM Pipelines"></a>步骤3：编写ITEM Pipelines</h2><p>注意该文件中，类里的三个方法: 打开、运行、关闭。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define your item pipelines here</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Don't forget to add your pipeline to the ITEM_PIPELINES setting</span></span><br><span class="line"><span class="comment"># See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># useful for handling different item types with a single interface</span></span><br><span class="line"><span class="keyword">from</span> itemadapter <span class="keyword">import</span> ItemAdapter</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkPipeline</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fp = open(<span class="string">'duanzi.json'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 爬虫启动时执行的函数，比如打开文件，也可写在构造函数中</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        print(<span class="string">'--------&gt; 爬虫开始了... &lt;---------'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 爬虫运行时，即qsbk_spider.py 中的生成器依次调用, item就是yield依次传来的值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        <span class="comment"># item_json = json.dumps(item,ensure_ascii=False) # 第一次，未指定item</span></span><br><span class="line">        item_json = json.dumps(dict(item),ensure_ascii=<span class="literal">False</span>) <span class="comment"># 第二次，指定items.py中的类，此处用dict()函数将其转换为字典</span></span><br><span class="line">        self.fp.write(item_json + <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">'pipelines调用'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 爬虫结束时执行的函数，关闭文件</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        self.fp.close()</span><br><span class="line">        print(<span class="string">'--------&gt; 爬虫结束了... &lt;---------'</span>)</span><br></pre></td></tr></table></figure><h3 id="items-py编写"><a href="#items-py编写" class="headerlink" title="items.py编写"></a>items.py编写</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># https://docs.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    </span><br><span class="line">    author = scrapy.Field() <span class="comment"># 选择需要输出结果的属性</span></span><br><span class="line">    content = scrapy.Field()</span><br></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>若要使用ITEM Pipelines，需要在setting.py中开启。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Configure item pipelines</span></span><br><span class="line"><span class="comment"># See https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">'qsbk.pipelines.QsbkPipeline'</span>: <span class="number">300</span>, <span class="comment"># 当有多个pipelines，后面的值越小代表越优先执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="优化数据存储的方式"><a href="#优化数据存储的方式" class="headerlink" title="优化数据存储的方式"></a>优化数据存储的方式</h2><h3 id="方法一：使用JsonItemExporter"><a href="#方法一：使用JsonItemExporter" class="headerlink" title="方法一：使用JsonItemExporter"></a>方法一：使用<code>JsonItemExporter</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.exporters <span class="keyword">import</span> JsonItemExporter <span class="comment"># scrapy框架里的JSON导出器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkPipeline</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fp = open(<span class="string">'duanzi.json'</span>, <span class="string">'wb'</span>) <span class="comment"># 二进制方法打开 , 不能指定 encoding = 'utf-8'</span></span><br><span class="line">        self.exporter = JsonItemExporter(self.fp, ensure_ascii = <span class="literal">False</span>, encoding = <span class="string">'utf-8'</span>)</span><br><span class="line">        self.exporter.start_exporting() <span class="comment"># 开始</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">open_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        print(<span class="string">'--------&gt; 爬虫开始了... &lt;---------'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        self.exporter.export_item(item)</span><br><span class="line">        print(<span class="string">'pipelines调用'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        self.exporter.finish_exporting() <span class="comment"># 该方法是把所有的item存为一个列表，每个元素是一个item</span></span><br><span class="line">        self.fp.close()</span><br><span class="line">        print(<span class="string">'--------&gt; 爬虫结束了... &lt;---------'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>缺点：所有item存在一个列表中，一起写入文件，较消耗内存。</p><p>​            需要 开始 和 结束 。</p><p>但整体满足格式要求，一个大列表，每个元素是一个item的json格式数据。</p></blockquote><h3 id="方法二：使用JsonLinesItemExporter"><a href="#方法二：使用JsonLinesItemExporter" class="headerlink" title="方法二：使用JsonLinesItemExporter"></a>方法二：使用<code>JsonLinesItemExporter</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.exporters <span class="keyword">import</span> JsonLinesItemExporter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkPipeline</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fp = open(<span class="string">'duanzi.json'</span>, <span class="string">'wb'</span>) </span><br><span class="line">        self.exporter = JsonLinesItemExporter(self.fp, ensure_ascii = <span class="literal">False</span>, encoding = <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        print(<span class="string">'--------&gt; 爬虫开始了... &lt;---------'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        self.exporter.export_item(item)</span><br><span class="line">        print(<span class="string">'pipelines调用'</span>) </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        self.fp.close()</span><br><span class="line">        print(<span class="string">'--------&gt; 爬虫结束了... &lt;---------'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>此方法把每个item作为一个单独的字典类型存入文件。</p><p>不需要 开始 和 结束 。</p><p>缺点：每行数据为一个字典（json格式），但整个文件并不满足json格式。</p></blockquote><h2 id="抓取多个页面"><a href="#抓取多个页面" class="headerlink" title="抓取多个页面"></a>抓取多个页面</h2><p>主要是最后几行代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"><span class="keyword">from</span> qsbk.items <span class="keyword">import</span> QsbkItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkSpiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'qsbk_spider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'qiushibaike.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://qiushibaike.com/text/page/1/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        duanziDivs = response.xpath(<span class="string">"//div[@class='col1 old-style-col1']/div"</span>)</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> div <span class="keyword">in</span> duanziDivs:</span><br><span class="line">            author = div.xpath(<span class="string">".//h2/text()"</span>).get().strip()</span><br><span class="line">            href = div.xpath(<span class="string">'./a/@href'</span>).get() <span class="comment"># 获取a标签内的href的属性值</span></span><br><span class="line">            url = urljoin(self.start_urls[<span class="number">0</span>],href) <span class="comment"># 跳转到详情页</span></span><br><span class="line">            content = div.xpath(<span class="string">".//div[@class='content']//text()"</span>).extract()</span><br><span class="line">            content = <span class="string">''</span>.join(content).strip()</span><br><span class="line">            item = QsbkItem(author=author, content=content)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            print(<span class="string">'生成器调用：'</span>,i)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">        next_path = response.xpath(<span class="string">"//ul[@class='pagination']/li[last()]/a/@href"</span>).get() <span class="comment"># 底部显示页面的最后一个li标签，‘下一页’</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> next_path: <span class="comment"># 如果没有下一页</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            next_url = urljoin(self.start_urls[<span class="number">0</span>], next_path)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_url, callback=self.parse) <span class="comment"># 利用当前页的url，执行上面的parse解析函数</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇是python实例编写：&lt;strong&gt;糗事百科&lt;/strong&gt;，目的是介绍最基础的scrapy框架的写法和运行过程。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Planan_03(7.6~7.12)</title>
    <link href="http://icewind-r.github.io/2020/07/04/Plan-02-%E7%AC%AC%E4%BA%8C%E5%91%A8/"/>
    <id>http://icewind-r.github.io/2020/07/04/Plan-02-%E7%AC%AC%E4%BA%8C%E5%91%A8/</id>
    <published>2020-07-04T10:17:35.000Z</published>
    <updated>2020-07-04T11:29:09.834Z</updated>
    
    <content type="html"><![CDATA[<p>第三周开始了，高考也将至，时间飞逝啊。</p><a id="more"></a><hr><p>本周目标：</p><ul><li><p>Scrapy框架学习，尝试独立完成一个爬取实例。</p></li><li><p>学习小组确定主题，尝试开始或者一起学习，（Github Page搭建官网？）。</p></li><li><p>APP小组尝试开始。</p></li><li><p>python Web？</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;第三周开始了，高考也将至，时间飞逝啊。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Plan" scheme="http://iceWind-R.github.io/categories/Plan/"/>
    
    
      <category term="idea" scheme="http://iceWind-R.github.io/tags/idea/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_07(Scrapy初步使用)</title>
    <link href="http://icewind-r.github.io/2020/07/03/python%E7%88%AC%E8%99%AB-07/"/>
    <id>http://icewind-r.github.io/2020/07/03/python%E7%88%AC%E8%99%AB-07/</id>
    <published>2020-07-02T23:15:49.000Z</published>
    <updated>2020-07-09T03:38:21.896Z</updated>
    
    <content type="html"><![CDATA[<p>本篇是python<strong>框架Scrapy</strong>的初步使用。</p><a id="more"></a><hr><h1 id="创建Scrapy爬虫工程"><a href="#创建Scrapy爬虫工程" class="headerlink" title="创建Scrapy爬虫工程"></a>创建Scrapy爬虫工程</h1><p>演示HTML页面地址：<a href="http://python123.io/ws/demo.html" target="_blank" rel="noopener">http://python123.io/ws/demo.html</a></p><p>文件名称：demo.html</p><h2 id="创建步骤"><a href="#创建步骤" class="headerlink" title="创建步骤"></a>创建步骤</h2><p>应用Scrapy爬虫框架主要是编写<strong>配置型代码</strong>.</p><h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p><strong>建立一个Scrapy爬虫工程</strong>。选取一个目录，cmd打开命令行运行下述代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject python123demo   <span class="comment"># python123demo为工程名</span></span><br></pre></td></tr></table></figure><p><strong>生成的工程目录</strong></p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/1.png" class><ol><li>item.py：用来存储爬虫爬取下来的数据模型。</li><li>middlewares.py：用来存放各种中间件的文件。</li><li>pipelines.py：用来将items模型存储到本地磁盘中。</li><li>settings.py：本爬虫的一些配置信息（比如请求头、多久发送一次请求、ip代理池等）</li><li>scrapy.cfg：项目的 配置文件。</li><li>spider文件夹：所有的爬虫代码文件。</li></ol><p>其中spiders/ 目录下的内容为：（后续生成的demo.py便在此文件下）</p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/2.png" class><h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><p><strong>在工程中产生一个Scrapy爬虫</strong>。进入工程目录（\python123demo目录下），然后执行如下命令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider demo python123.io</span><br></pre></td></tr></table></figure><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/3.png" class><p>该命令作用：</p><p>(1) 生成一个名称为demo的spider（不能与项目名一致）</p><p>(2) 爬取网站的url为 python123.io</p><p>(3) 在spiders目录下增加代码文件demo.py</p><blockquote><p>该命令仅用于生成demo.py，该文件也可以手工生成.</p></blockquote><p><strong>demo.py文件</strong></p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/4.png" class><blockquote><p>类名为DemoSpider（demo为自己命名的demo文件），且继承自 <code>scrapy.Spider</code></p><p>name = “Demo”，当前爬虫名为Demo</p><p>allowed_domains: 是最开始在命令行中写入的域名，表示只能爬取该域名以下的相关链接</p><p>start_urls: 爬虫启动时最开始的url链接。是包含一个或多个url 的列表</p><p>parse：一个解析页面的空方法</p></blockquote><h3 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h3><p>设置<code>settings.py</code>，设置了两个地方，第一是不遵守robots.txt协议（设为False）；第二是设置请求头，添加了user-agent选项。</p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/17.png" class><h3 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h3><p><strong>配置产生的spider爬虫</strong>。主要是对<code>demo.py</code>文件的编写修改。（这里的案例以爬取相关网址，获得html，并存储在文件中作为演示）</p><p>配置：（1）初始URL地址 （2）获取页面后的解析方式</p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/5.png" class><h3 id="第五步"><a href="#第五步" class="headerlink" title="第五步"></a>第五步</h3><p>运行爬虫，获取网页</p><p>在命令行下，执行如下命令：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl demo</span><br></pre></td></tr></table></figure><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/6.png" class><p>parse方法中：</p><ul><li><code>fname = response.url.split(&#39;/&#39;)[-1]</code>，意为：从response响应中提取url，把最后的名字（即 ‘/’ 后的名字）作为待存储的本地文件名。</li><li></li></ul><p>demo爬虫被执行，捕获页面存储在demo.html</p><h2 id="demo-py代码的完整版本"><a href="#demo-py代码的完整版本" class="headerlink" title="demo.py代码的完整版本"></a>demo.py代码的完整版本</h2><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/7.png" class><p><strong>demo.py两个等价版本的区别</strong></p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/8.png" class><h1 id="yield关键字的使用"><a href="#yield关键字的使用" class="headerlink" title="yield关键字的使用"></a>yield关键字的使用</h1><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/9.png" class><p>生成器每调用一次在yield位置产生一个值，直到函数执行结束.</p><h2 id="为何要有生成器？"><a href="#为何要有生成器？" class="headerlink" title="为何要有生成器？"></a>为何要有生成器？</h2><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/10.png" class><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/11.png" class><p><strong>demo.py</strong></p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/12.png" class><h1 id="Scrapy爬虫的基本使用"><a href="#Scrapy爬虫的基本使用" class="headerlink" title="Scrapy爬虫的基本使用"></a>Scrapy爬虫的基本使用</h1><h2 id="Scrapy爬虫的使用步骤"><a href="#Scrapy爬虫的使用步骤" class="headerlink" title="Scrapy爬虫的使用步骤"></a>Scrapy爬虫的使用步骤</h2><p>步骤1：创建一个工程和Spider模板</p><p>步骤2：编写Spider</p><p>步骤3：编写Item Pipeline：对Spider提取信息的后续处理做相关的定义</p><p>步骤4：优化配置策略</p><h2 id="Scrapy爬虫的数据类型"><a href="#Scrapy爬虫的数据类型" class="headerlink" title="Scrapy爬虫的数据类型"></a>Scrapy爬虫的数据类型</h2><p>注意：这里的request类和response类是Scrapy库的，和requests库的不是完全一致，但几乎相同。</p><h3 id="Request类"><a href="#Request类" class="headerlink" title="Request类"></a>Request类</h3><p><code>class scrapy.http.Request()</code></p><p>Request对象表示一个HTTP请求，由Spider生成，由Downloader执行。</p><p><strong>属性和方法</strong></p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/13.png" class><h3 id="Response类"><a href="#Response类" class="headerlink" title="Response类"></a>Response类</h3><p><code>class scrapy.http.Response()</code></p><p>Response对象表示一个HTTP响应，由Downloader生成，由Spider处理。</p><p><strong>属性和方法</strong></p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/14.png" class><h3 id="Item类"><a href="#Item类" class="headerlink" title="Item类"></a>Item类</h3><p><code>class scrapy.item.Item()</code></p><p>Item对象表示一个从HTML页面中提取的信息内容</p><p>由Spider生成，由Item Pipeline处理</p><p>Item类似字典类型，可以按照字典类型操作</p><blockquote><p>在scrapy爬虫中，Spider爬取网页，得到的信息以键值对的形式封装成字典，这种字典就是<code>Item</code>类</p></blockquote><h2 id="Scrapy爬虫提取信息的方法"><a href="#Scrapy爬虫提取信息的方法" class="headerlink" title="Scrapy爬虫提取信息的方法"></a>Scrapy爬虫提取信息的方法</h2><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/15.png" class><p>重点介绍<strong>CSS Selector</strong>的基本使用。</p><img src="/2020/07/03/python%E7%88%AC%E8%99%AB-07/16.png" class><blockquote><p>该方法在scrapy框架中十分常见，比较简单，需要掌握。</p></blockquote><h1 id="补充：Xpath"><a href="#补充：Xpath" class="headerlink" title="补充：Xpath"></a>补充：Xpath</h1><p>Xpath在Scrapy框架中常用。</p><h2 id="Xpath语法"><a href="#Xpath语法" class="headerlink" title="Xpath语法"></a>Xpath语法</h2><p>其实只分为3类</p><ul><li>层级：<code>/</code>直接子级，<code>//</code>跳级</li><li>属性：<code>@</code> 属性访问</li><li>函数：<code>contains()</code>、<code>text()</code>等。<ul><li>contains()：检测某个属性并不是完全等于某个值，而是<strong>包含</strong>某个值。</li><li>text()：对标签内的文字结点进行提取。</li></ul></li></ul><h2 id="在Scrapy中的应用"><a href="#在Scrapy中的应用" class="headerlink" title="在Scrapy中的应用"></a>在Scrapy中的应用</h2><p>scrapy中支持Xpath的使用，<code>response.xpath()</code>直接调用即可。</p><p><strong>案例</strong>：糗事百科，提取作者、文章详情页的url，和文章内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkSpiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'qsbk_spider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'qiushibaike.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://qiushibaike.com/text/page/1/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># selectorList 类型</span></span><br><span class="line">        duanziDivs = response.xpath(<span class="string">"//div[@class='col1 old-style-col1']/div"</span>)</span><br><span class="line">        <span class="keyword">for</span> div <span class="keyword">in</span> duanziDivs:</span><br><span class="line">            <span class="comment"># div: Selector类型</span></span><br><span class="line">            <span class="comment"># div.xpath()：selectorList类型</span></span><br><span class="line">            author = div.xpath(<span class="string">".//h2/text()"</span>).get().strip()</span><br><span class="line">            <span class="comment"># get()函数，取到第一个结果（str类型）, get()&lt;=&gt;extract_first()</span></span><br><span class="line">            <span class="comment"># extract(): 提取所有结果组成列表，每个元素是str类型</span></span><br><span class="line">            <span class="comment"># strip(): 去掉前后的空格</span></span><br><span class="line"></span><br><span class="line">            href = div.xpath(<span class="string">'./a/@href'</span>).get() <span class="comment"># 获取a标签内的href的属性值</span></span><br><span class="line">            url = urljoin(self.start_urls[<span class="number">0</span>],href) <span class="comment"># 跳转到详情页</span></span><br><span class="line"></span><br><span class="line">            content = div.xpath(<span class="string">".//div[@class='content']//text()"</span>).extract()</span><br><span class="line">            <span class="comment"># html中该div下有span标签，span中才是内容，//text()直接提取该内容</span></span><br><span class="line"></span><br><span class="line">            content = <span class="string">''</span>.join(content).strip()</span><br><span class="line"></span><br><span class="line">            tplt = <span class="string">"&#123;0:&#123;2&#125;&lt;20&#125;\t&#123;1:^50&#125;"</span></span><br><span class="line">            print(tplt.format(author,url,chr(<span class="number">12288</span>)))</span><br><span class="line">            print(content)</span><br><span class="line">            print(<span class="string">'='</span> * <span class="number">100</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇是python&lt;strong&gt;框架Scrapy&lt;/strong&gt;的初步使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_06(Scrapy介绍)</title>
    <link href="http://icewind-r.github.io/2020/07/02/Python%E7%88%AC%E8%99%AB-06/"/>
    <id>http://icewind-r.github.io/2020/07/02/Python%E7%88%AC%E8%99%AB-06/</id>
    <published>2020-07-02T06:08:15.000Z</published>
    <updated>2020-07-07T00:24:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>本篇总结python爬虫的重要<strong>框架</strong>——<strong>Scrapy</strong>。</p><a id="more"></a><hr><h1 id="Scrapy爬虫框架介绍"><a href="#Scrapy爬虫框架介绍" class="headerlink" title="Scrapy爬虫框架介绍"></a>Scrapy爬虫框架介绍</h1><p>Scrapy是一个快速功能强大的网络爬虫框架。</p><h2 id="Scrapy的安装"><a href="#Scrapy的安装" class="headerlink" title="Scrapy的安装"></a>Scrapy的安装</h2><p>以管理员身份运行Scrapy平台，输入以下命令即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapy</span><br></pre></td></tr></table></figure><h2 id="Scrapy爬虫框架结构"><a href="#Scrapy爬虫框架结构" class="headerlink" title="Scrapy爬虫框架结构"></a>Scrapy爬虫框架结构</h2><p>Scrapy不是一个函数功能库，而是一个爬虫框架。</p><h3 id="什么是爬虫框架？"><a href="#什么是爬虫框架？" class="headerlink" title="什么是爬虫框架？"></a>什么是爬虫框架？</h3><ul><li>爬虫框架是实现爬虫功能的一个软件结构和功能组件集合。 </li><li>爬虫框架是一个半成品，能够帮助用户实现专业网络爬虫。</li></ul><h3 id="5-2-结构"><a href="#5-2-结构" class="headerlink" title="5+2 结构"></a>5+2 结构</h3><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/1.png" class><h3 id="数据流的三种路径"><a href="#数据流的三种路径" class="headerlink" title="数据流的三种路径"></a>数据流的三种路径</h3><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/2.png" class><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/3.png" class><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/4.png" class><h3 id="数据流的出入口"><a href="#数据流的出入口" class="headerlink" title="数据流的出入口"></a>数据流的出入口</h3><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/5.png" class><p>需要注意的是：scrapy的五个模块中，DOWNLOADER、SCHEDULER和ENGINE三个已经实现，用户只需编写配置SPIDERS和ITEM PIPELINES两个模块即可。</p><h1 id="Scrapy爬虫框架解析"><a href="#Scrapy爬虫框架解析" class="headerlink" title="Scrapy爬虫框架解析"></a>Scrapy爬虫框架解析</h1><p>主要是对五个模块和两个中间键。</p><h2 id="Engine"><a href="#Engine" class="headerlink" title="Engine"></a>Engine</h2><p>(1) 控制所有模块之间的数据流</p><p>(2) 根据条件触发事件 </p><p>不需要用户修改</p><h2 id="Downloader"><a href="#Downloader" class="headerlink" title="Downloader"></a>Downloader</h2><p>根据请求下载网页 不需要用户修改</p><h2 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h2><p>对所有爬取请求进行调度管理 不需要用户修改</p><h2 id="Downloader-Middleware"><a href="#Downloader-Middleware" class="headerlink" title="Downloader Middleware"></a>Downloader Middleware</h2><p><strong>目的</strong>：实施Engine、Scheduler和Downloader 之间进行用户可配置的控制 </p><p><strong>功能</strong>：修改、丢弃、新增请求或响应 </p><p>用户可以编写配置代码</p><h2 id="Spider"><a href="#Spider" class="headerlink" title="Spider"></a>Spider</h2><p>(1) 解析Downloader返回的响应（Response）</p><p>(2) 产生爬取项（scraped item） </p><p>(3) 产生额外的爬取请求（Request） </p><p>需要用户编写配置代码</p><h2 id="Item-Pipelines"><a href="#Item-Pipelines" class="headerlink" title="Item Pipelines"></a>Item Pipelines</h2><p>(1) 以流水线方式处理Spider产生的爬取项 </p><p>(2) 由一组操作顺序组成，类似流水线，每个操 作是一个Item Pipeline类型 </p><p>(3) 可能操作包括：清理、检验和查重爬取项中 的HTML数据、将数据存储到数据库 </p><p>需要用户编写配置代码</p><h2 id="Spider-Middleware"><a href="#Spider-Middleware" class="headerlink" title="Spider Middleware"></a>Spider Middleware</h2><p><strong>目的</strong>：对请求和爬取项的再处理 </p><p><strong>功能</strong>：修改、丢弃、新增请求或爬取项 </p><p>用户可以编写配置代码</p><h1 id="requests库和Scrapy爬虫的比较"><a href="#requests库和Scrapy爬虫的比较" class="headerlink" title="requests库和Scrapy爬虫的比较"></a>requests库和Scrapy爬虫的比较</h1><h2 id="相同点："><a href="#相同点：" class="headerlink" title="相同点："></a>相同点：</h2><ul><li><p>两者都可以进行页面请求和爬取，Python爬虫的两个重要技术路线 </p></li><li><p>两者可用性都好，文档丰富，入门简单 </p></li><li><p>两者都没有处理js、提交表单、应对验证码等功能（可扩展）</p></li></ul><h2 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h2><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/6.png" class><h2 id="如何选择呢？"><a href="#如何选择呢？" class="headerlink" title="如何选择呢？"></a>如何选择呢？</h2><p>面临一个爬取需求，我们该选用requests库还是Scrapy库呢？</p><ul><li>非常小的需求，requests库 </li><li>不太小的需求，Scrapy框架 </li><li>定制程度很高的需求（不考虑规模），自搭框架，requests &gt; Scrapy</li></ul><h1 id="Scrapy爬虫的常用命令"><a href="#Scrapy爬虫的常用命令" class="headerlink" title="Scrapy爬虫的常用命令"></a>Scrapy爬虫的常用命令</h1><p>Scrapy是为持续运行设计的专业爬虫框架，提供操作的Scrapy命令行，主要通过cmd命令行实现。</p><h2 id="Scrapy命令行格式"><a href="#Scrapy命令行格式" class="headerlink" title="Scrapy命令行格式"></a>Scrapy命令行格式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;scrapy &lt;command&gt; [options] [args]</span><br></pre></td></tr></table></figure><h2 id="Scrapy常用命令"><a href="#Scrapy常用命令" class="headerlink" title="Scrapy常用命令"></a>Scrapy常用命令</h2><img src="/2020/07/02/Python%E7%88%AC%E8%99%AB-06/7.png" class><h2 id="为什么Scrapy采用命令行创建和运行爬虫？"><a href="#为什么Scrapy采用命令行创建和运行爬虫？" class="headerlink" title="为什么Scrapy采用命令行创建和运行爬虫？"></a>为什么Scrapy采用命令行创建和运行爬虫？</h2><ul><li><p>命令行（不是图形界面）更容易自动化，适合脚本控制</p></li><li><p>本质上，Scrapy是给程序员用的，功能（而不是界面）更重要</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇总结python爬虫的重要&lt;strong&gt;框架&lt;/strong&gt;——&lt;strong&gt;Scrapy&lt;/strong&gt;。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_05(正则表达式)</title>
    <link href="http://icewind-r.github.io/2020/07/01/Python%E7%88%AC%E8%99%AB-05/"/>
    <id>http://icewind-r.github.io/2020/07/01/Python%E7%88%AC%E8%99%AB-05/</id>
    <published>2020-07-01T08:41:22.000Z</published>
    <updated>2020-07-01T11:16:39.964Z</updated>
    
    <content type="html"><![CDATA[<p>本篇总结 <strong>正则</strong> 在python爬虫中的应用。</p><a id="more"></a><hr><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>之前有过总结，不再赘述，也可以阅读一篇非常有名的博客叫<a href="https://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">《正则表达式30分钟入门教程》</a>。</p><p>这里做一些概要的总结，供以后使用时参阅。</p><h2 id="正则表达式的常用操作符"><a href="#正则表达式的常用操作符" class="headerlink" title="正则表达式的常用操作符"></a>正则表达式的常用操作符</h2><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/1.png" class><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/2.png" class><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/3.png" class><h3 id="IP地址的匹配"><a href="#IP地址的匹配" class="headerlink" title="IP地址的匹配"></a>IP地址的匹配</h3><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/4.png" class><h1 id="Re库"><a href="#Re库" class="headerlink" title="Re库"></a>Re库</h1><p>Re库是python的标准库，主要用于字符串匹配。调用方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br></pre></td></tr></table></figure><h2 id="正则表达式的表示类型"><a href="#正则表达式的表示类型" class="headerlink" title="正则表达式的表示类型"></a>正则表达式的表示类型</h2><p>采用<code>raw string</code>类型（原生字符串类型），表示为<code>r&#39;text&#39;</code>，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">r'[1-9]\d&#123;5&#125;'</span> <span class="comment"># 六位邮政编码</span></span><br><span class="line"><span class="string">r'\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;'</span></span><br></pre></td></tr></table></figure><p><code>raw string</code>是不包含<strong>转义符</strong>的字符串</p><p>正则表达式也可以用string类型，但较为繁琐，因为<code>\</code>会被理解为转义符。</p><h2 id="Re库的主要功能函数"><a href="#Re库的主要功能函数" class="headerlink" title="Re库的主要功能函数"></a>Re库的主要功能函数</h2><p>主要有六个功能函数。</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/5.png" class><p>下面依次介绍。</p><h3 id="1、re-search-pattern-string-flags-0"><a href="#1、re-search-pattern-string-flags-0" class="headerlink" title="1、re.search(pattern, string, flags=0)"></a>1、re.search(<strong>pattern</strong>, <strong>string</strong>, <strong>flags=0</strong>)</h3><p>在一个字符串中搜索匹配正则表达式的第一个位置，返回<strong>match</strong>对象。</p><p>参数：</p><ul><li><p><strong>pattern</strong> : 正则表达式的字符串或原生字符串表示。</p></li><li><p><strong>string</strong> : 待匹配字符串</p></li><li><p><strong>flags</strong> : 正则表达式使用时的控制标记</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/6.png" class></li></ul><h3 id="2、re-match-pattern-string-flags-0"><a href="#2、re-match-pattern-string-flags-0" class="headerlink" title="2、re.match(pattern, string, flags=0)"></a>2、re.match(<strong>pattern</strong>, <strong>string</strong>, <strong>flags=0</strong>)</h3><p>从一个字符串的开始位置起匹配正则表达式，返回<strong>match</strong>对象</p><p>参数同上。</p><p>但需要<strong>注意</strong>，这是从待匹配字符串的第一个位置开始，即第一个字符不符合匹配条件，就得不到结果。</p><h3 id="3、re-findall-pattern-string-flags-0"><a href="#3、re-findall-pattern-string-flags-0" class="headerlink" title="3、re.findall(pattern, string, flags=0)"></a>3、re.findall(<strong>pattern</strong>, <strong>string</strong>, <strong>flags=0</strong>)</h3><p>搜索字符串，以列表类型返回全部能匹配的子串</p><p>参数同上。</p><p><strong>注意</strong>：返回的是列表形式，每个元素为匹配成功的字符串。</p><h3 id="4、re-split-pattern-string-maxsplit-0-flags-0"><a href="#4、re-split-pattern-string-maxsplit-0-flags-0" class="headerlink" title="4、re.split(pattern, string, maxsplit=0, flags=0)"></a>4、re.split(<strong>pattern</strong>, <strong>string</strong>, <strong>maxsplit=0</strong>, <strong>flags=0</strong>)</h3><p>将一个字符串按照正则表达式匹配结果进行分割，返回列表类型</p><p>参数：</p><ul><li><strong>maxsplit</strong>: 最大分割数，剩余部分作为最后一个元素输出</li></ul><p><strong>举例</strong>：</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/7.png" class><h3 id="5、re-finditer-pattern-string-flags-0"><a href="#5、re-finditer-pattern-string-flags-0" class="headerlink" title="5、re.finditer(pattern, string, flags=0)"></a>5、re.finditer(<strong>pattern</strong>, <strong>string</strong>, <strong>flags=0</strong>)</h3><p>搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是match对象</p><h3 id="6、re-sub-pattern-repl-string-count-0-flags-0"><a href="#6、re-sub-pattern-repl-string-count-0-flags-0" class="headerlink" title="6、re.sub(pattern, repl, string, count=0, flags=0)"></a>6、re.sub(<strong>pattern</strong>, <strong>repl</strong>, <strong>string</strong>, <strong>count=0</strong>, <strong>flags=0</strong>)</h3><p>在一个字符串中替换所有匹配正则表达式的子串返回替换后的字符串</p><p>参数：</p><ul><li><strong>repl</strong> : 替换匹配字符串的字符串</li><li><strong>count</strong> : 匹配的最大替换次数</li></ul><p><strong>举例</strong></p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/8.png" class><h2 id="Re库的另一种等价用法"><a href="#Re库的另一种等价用法" class="headerlink" title="Re库的另一种等价用法"></a>Re库的另一种等价用法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数式用法：一次性操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rst = re.search(<span class="string">r'[1‐9]\d&#123;5&#125;'</span>, <span class="string">'BIT 100081'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上下两种方法等价</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 面向对象用法：编译后的多次操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.compile(<span class="string">r'[1‐9]\d&#123;5&#125;'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rst = pat.search(<span class="string">'BIT 100081'</span>)</span><br></pre></td></tr></table></figure><p>为此介绍如下方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regex = re.compile(pattern, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>将正则表达式的字符串形式编译成正则表达式对象 <code>regex</code>。</p><p>然后结合相应的六种方法。</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/9.png" class><h1 id="Re库的Match对象"><a href="#Re库的Match对象" class="headerlink" title="Re库的Match对象"></a>Re库的Match对象</h1><p>Match对象是一次匹配的结果，包含匹配的很多信息</p><h2 id="Match对象的属性"><a href="#Match对象的属性" class="headerlink" title="Match对象的属性"></a>Match对象的属性</h2><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/10.png" class><h2 id="Match对象的方法"><a href="#Match对象的方法" class="headerlink" title="Match对象的方法"></a>Match对象的方法</h2><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/11.png" class><p><strong>实例：</strong></p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/12.png" class><h1 id="Re库的贪婪匹配和最小匹配"><a href="#Re库的贪婪匹配和最小匹配" class="headerlink" title="Re库的贪婪匹配和最小匹配"></a>Re库的贪婪匹配和最小匹配</h1><h2 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h2><p>同时匹配长短不同的多项，返回哪一个呢？</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/13.png" class><h2 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.search(<span class="string">r'PY.*N'</span>, <span class="string">'PYANBNCNDN'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match.group(<span class="number">0</span>)</span><br><span class="line"><span class="string">'PYANBNCNDN'</span></span><br></pre></td></tr></table></figure><p>Re库默认采用贪婪匹配，即输出匹配最长的子串</p><h2 id="最小匹配"><a href="#最小匹配" class="headerlink" title="最小匹配"></a>最小匹配</h2><p>加操作符<code>?</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.search(<span class="string">r'PY.*?N'</span>, <span class="string">'PYANBNCNDN'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match.group(<span class="number">0</span>)</span><br><span class="line"><span class="string">'PYAN'</span></span><br></pre></td></tr></table></figure><h2 id="最小匹配操作符"><a href="#最小匹配操作符" class="headerlink" title="最小匹配操作符"></a>最小匹配操作符</h2><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/14.png" class><p>只要长度输出可能不同的，都可以通过在操作符后增加<code>?</code>变成最小匹配</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-05/15.png" class>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇总结 &lt;strong&gt;正则&lt;/strong&gt; 在python爬虫中的应用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_04(信息提取)</title>
    <link href="http://icewind-r.github.io/2020/07/01/Python%E7%88%AC%E8%99%AB-04/"/>
    <id>http://icewind-r.github.io/2020/07/01/Python%E7%88%AC%E8%99%AB-04/</id>
    <published>2020-07-01T00:32:42.000Z</published>
    <updated>2020-07-09T13:55:03.153Z</updated>
    
    <content type="html"><![CDATA[<p>本篇总结爬取时 <strong>信息标记</strong> 和 <strong>提取方法</strong> 。</p><a id="more"></a><hr><h1 id="信息标记的三种形式"><a href="#信息标记的三种形式" class="headerlink" title="信息标记的三种形式"></a>信息标记的三种形式</h1><ul><li><p>标记后的信息可形成信息组织结构，增加了信息维度 </p></li><li><p>标记的结构与信息一样具有重要价值 </p></li><li><p>标记后的信息可用于通信、存储或展示 </p></li><li><p>标记后的信息更利于程序理解和运用</p></li></ul><p>有三种形式，XML，JSON，YAML</p><h2 id="1、XML"><a href="#1、XML" class="headerlink" title="1、XML"></a>1、XML</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>...<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、JSON"><a href="#2、JSON" class="headerlink" title="2、JSON"></a>2、JSON</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"key":"value"</span><br><span class="line">"key":["value1","value2"]</span><br><span class="line">"key":&#123;</span><br><span class="line">    "subkey1":"subvalue1",</span><br><span class="line">    "subkey2":"subvalue2"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：JSON无法表示注释内容。</p></blockquote><h2 id="3、YAML"><a href="#3、YAML" class="headerlink" title="3、YAML"></a>3、YAML</h2><p>缩进表达所属关系。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">key :</span> <span class="string">value</span></span><br><span class="line"><span class="attr">key :</span> <span class="comment"># comment</span></span><br><span class="line"><span class="string">-value1</span></span><br><span class="line"><span class="string">-value2</span></span><br><span class="line"><span class="attr">key :</span> </span><br><span class="line"><span class="attr">subKey :</span> <span class="string">subvalue</span></span><br><span class="line"><span class="attr">text:</span> <span class="string">|</span></span><br><span class="line"><span class="string">xxx</span></span><br><span class="line"><span class="string">xxx</span><span class="comment"># | 表达整块数据</span></span><br></pre></td></tr></table></figure><h1 id="信息提取的一般方法"><a href="#信息提取的一般方法" class="headerlink" title="信息提取的一般方法"></a>信息提取的一般方法</h1><h2 id="1、完整解析信息的标记形式"><a href="#1、完整解析信息的标记形式" class="headerlink" title="1、完整解析信息的标记形式"></a>1、完整解析信息的标记形式</h2><p>需要标记解析器，例如：bs4库的标签树遍历</p><ul><li>优点：信息解析准确 </li><li>缺点：提取过程繁琐，速度慢</li></ul><h2 id="2、无视标记形式，直接搜索关键信息"><a href="#2、无视标记形式，直接搜索关键信息" class="headerlink" title="2、无视标记形式，直接搜索关键信息"></a>2、无视标记形式，直接搜索关键信息</h2><p>对信息的文本查找函数即可。</p><ul><li>优点：提取过程简洁，速度较快 </li><li>缺点：提取结果准确性与信息内容相关</li></ul><h2 id="3、融合方法"><a href="#3、融合方法" class="headerlink" title="3、融合方法"></a>3、融合方法</h2><p>结合形式解析与搜索方法，提取关键信息。</p><p>需要标记解析器及文本查找函数。</p><p>主要学习下面的bs4中的<code>find_all()</code>的查找方法。</p><h1 id="基于bs4库的HTML内容查找方法"><a href="#基于bs4库的HTML内容查找方法" class="headerlink" title="基于bs4库的HTML内容查找方法"></a>基于bs4库的HTML内容查找方法</h1><h2 id="find-all"><a href="#find-all" class="headerlink" title="find_all()"></a>find_all()</h2><p>掌握最主要的<code>find_all()</code>方法的使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Tag&gt;.find_all(name, attrs, recursive, string, **kwargs)</span><br></pre></td></tr></table></figure><p>该函数的使用说明：</p><ol><li><p>返回的是<strong>列表</strong>类型，存储查找的结果</p></li><li><p>参数解释：</p><ol><li><p>name: 对标签名称的检索字符串</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-04/1.png" class><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-04/2.png" class><blockquote><p>这里引用了正则表达式的相关知识，首先<code>import re</code>，引入该模块，调用的方法是<code>re.compile(&#39;b&#39;)</code>，这表示：模糊查询带有’b’的字符串，例如本题，查找带有字符’b’的所有标签，得到结果为 <b>和<body></body></b></p></blockquote></li><li><p>attrs：对标签属性值的检索字符串，可标注属性检索</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-04/3.png" class><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-04/4.png" class><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find(<span class="string">'h1'</span>, attrs = [<span class="string">'class'</span>:<span class="string">'ph'</span>]) <span class="comment"># 查找h1标签，且属性值class为ph</span></span><br></pre></td></tr></table></figure><blockquote><p>可见，BeautifulSoup库中的查询是严格的，可以引用re模块来进行模糊查询。</p></blockquote></li><li><p>recursive：是否对子孙全部检索，默认True</p></li><li><p>string：<code>&lt;&gt;...&lt;/&gt;</code>中字符串区域的检索字符串</p></li></ol></li></ol><p>查找方法的等价形式（更简便）</p><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-04/6.png" class><h2 id="其他查找方法"><a href="#其他查找方法" class="headerlink" title="其他查找方法"></a>其他查找方法</h2><img src="/2020/07/01/Python%E7%88%AC%E8%99%AB-04/5.png" class><h1 id="实例：中国大学的排名爬虫"><a href="#实例：中国大学的排名爬虫" class="headerlink" title="实例：中国大学的排名爬虫"></a>实例：中国大学的排名爬虫</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CrawUnivRankingA.py</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url, timeout=<span class="number">30</span>) <span class="comment"># r返回的是一个Response对象</span></span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> r.text <span class="comment"># 返回的r中的内容，即html代码的字符串形式</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'连接失败'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fillUnivList</span><span class="params">(ulist, html)</span>:</span></span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">"html.parser"</span>)</span><br><span class="line">    <span class="keyword">for</span> tr <span class="keyword">in</span> soup.find(<span class="string">'tbody'</span>).children:</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># soup.find('tbody')返回的是bs4.element.Tag类型</span></span><br><span class="line">        <span class="comment"># soup.find('tbody').children返回的是list_iterator类型</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> isinstance(tr, bs4.element.Tag): <span class="comment"># import bs4 库，使用标签类型</span></span><br><span class="line">            tds = tr(<span class="string">'td'</span>) <span class="comment"># 简写形式，等价于 tr.find_all('td')</span></span><br><span class="line">            ulist.append([tds[<span class="number">0</span>].string, tds[<span class="number">1</span>].string, tds[<span class="number">3</span>].string])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printUnivList</span><span class="params">(ulist, num)</span>:</span></span><br><span class="line">    tplt = <span class="string">"&#123;0:^10&#125;\t&#123;1:&#123;3&#125;^10&#125;\t&#123;2:^10&#125;"</span></span><br><span class="line">    print(tplt.format(<span class="string">"排名"</span>,<span class="string">"学校名称"</span>,<span class="string">"总分"</span>,chr(<span class="number">12288</span>)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">        u=ulist[i]</span><br><span class="line">        print(tplt.format(u[<span class="number">0</span>],u[<span class="number">1</span>],u[<span class="number">2</span>],chr(<span class="number">12288</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    uinfo = []</span><br><span class="line">    url = <span class="string">'http://www.zuihaodaxue.cn/zuihaodaxuepaiming2016.html'</span></span><br><span class="line">    html = getHTMLText(url)</span><br><span class="line">    fillUnivList(uinfo, html)</span><br><span class="line">    printUnivList(uinfo, <span class="number">20</span>)  <span class="comment"># 20 univs</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇总结爬取时 &lt;strong&gt;信息标记&lt;/strong&gt; 和 &lt;strong&gt;提取方法&lt;/strong&gt; 。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_03(BeautifulSoup库的使用)</title>
    <link href="http://icewind-r.github.io/2020/06/30/Python%E7%88%AC%E8%99%AB-03/"/>
    <id>http://icewind-r.github.io/2020/06/30/Python%E7%88%AC%E8%99%AB-03/</id>
    <published>2020-06-30T12:32:24.000Z</published>
    <updated>2020-07-09T02:52:16.092Z</updated>
    
    <content type="html"><![CDATA[<p>本篇总结 <strong>BeautifulSoup</strong> 库的安装使用（补充了<strong>Xpath</strong>）。</p><a id="more"></a><hr><h1 id="BeautifulSoup初步"><a href="#BeautifulSoup初步" class="headerlink" title="BeautifulSoup初步"></a>BeautifulSoup初步</h1><p>安装很容易，管理员打开命令行窗口，输入<code>pip install BeautifulSoup</code>，即可。</p><p>使用BeautifulSoup主要两行代码即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引用bs4库的BeautifulSoup类</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># html代码可以是requests库读取的网页代码 解析器：html的parser</span></span><br><span class="line">soup = BeautifulSoup(html代码, <span class="string">'html.parser'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可查看有代码缩进的html页面代码</span></span><br><span class="line">print(soup.prettify())</span><br></pre></td></tr></table></figure><h1 id="BeautifulSoup库的基本元素"><a href="#BeautifulSoup库的基本元素" class="headerlink" title="BeautifulSoup库的基本元素"></a>BeautifulSoup库的基本元素</h1><p>HTML文档、标签树和BeautifulSoup类的关系是等价的。</p><p>BeautifulSoup对应一个HTML/XML文档的全部内容</p><p>BeautifulSoup有四种解析器，其他三种需要另行安装。</p><h2 id="BeautifulSoup类的基本元素"><a href="#BeautifulSoup类的基本元素" class="headerlink" title="BeautifulSoup类的基本元素"></a>BeautifulSoup类的基本元素</h2><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/1.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/2.png" class><h3 id="1、Tag标签"><a href="#1、Tag标签" class="headerlink" title="1、Tag标签"></a>1、Tag标签</h3><p>任何存在于HTML语法中的标签都可以用<code>soup.&lt;Tag&gt;</code>访问获得 当HTML文档中存在多个相同<code>&lt;Tag&gt;</code>对应内容时，<code>soup.&lt;Tag&gt;</code>返回第一个。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.title</span><br><span class="line">&lt;title&gt;This is a title&lt;/title&gt;</span><br></pre></td></tr></table></figure><h3 id="2、Tag的name"><a href="#2、Tag的name" class="headerlink" title="2、Tag的name"></a>2、Tag的name</h3><p>每个<code>&lt;Tag&gt;</code>都有自己的名字，通过<code>&lt;Tag&gt;.name</code>获取，字符串类型.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.a.name</span><br><span class="line"><span class="string">'a'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.a.parent.name <span class="comment"># 包裹a的第一层标签为p标签</span></span><br><span class="line"><span class="string">'p'</span></span><br></pre></td></tr></table></figure><h3 id="3、Tag的attrs（属性）"><a href="#3、Tag的attrs（属性）" class="headerlink" title="3、Tag的attrs（属性）"></a>3、Tag的attrs（属性）</h3><p>一个<code>&lt;Tag&gt;</code>可以有 0或多个属性，字典类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tag = soup.a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tag.attrs</span><br><span class="line">&#123;<span class="string">'href'</span>: <span class="string">'http://www.icourse163.org/course/BIT-268001'</span>, <span class="string">'class'</span>: [<span class="string">'py1'</span>], <span class="string">'id'</span>: <span class="string">'link1'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tag.attrs[<span class="string">'href'</span>]</span><br><span class="line"><span class="string">'http://www.icourse163.org/course/BIT-268001'</span></span><br></pre></td></tr></table></figure><h3 id="4、Tag的NavigableString"><a href="#4、Tag的NavigableString" class="headerlink" title="4、Tag的NavigableString"></a>4、Tag的NavigableString</h3><p>NavigableString可以跨越多个层次。即直接获取<code>&lt;p&gt;&lt;a&gt;xxxx&lt;/a&gt;&lt;/p&gt;</code>里的内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.p</span><br><span class="line">&lt;p class="title"&gt;&lt;b&gt;The demo python introduces several python courses.&lt;/b&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.p.string</span><br><span class="line"><span class="string">'The demo python introduces several python courses.'</span></span><br></pre></td></tr></table></figure><h3 id="5、Tag的Comment"><a href="#5、Tag的Comment" class="headerlink" title="5、Tag的Comment"></a>5、Tag的Comment</h3><p>提取注释部分。</p><h1 id="基于bs4库的HTML内容遍历方法"><a href="#基于bs4库的HTML内容遍历方法" class="headerlink" title="基于bs4库的HTML内容遍历方法"></a>基于bs4库的HTML内容遍历方法</h1><p>有三种遍历方法：下行、上行和平行遍历。</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/3.png" class><h2 id="1、标签树的下行遍历"><a href="#1、标签树的下行遍历" class="headerlink" title="1、标签树的下行遍历"></a>1、标签树的下行遍历</h2><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/4.png" class><p>BeautifulSoup类型是标签树的根节点。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.body.contents</span><br><span class="line">['\n', &lt;p class="title"&gt;&lt;b&gt;The demo python introduces several python courses.&lt;/b&gt;&lt;/p&gt;, '\n', &lt;p class="course"&gt;Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line">&lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt; and &lt;a class="py2" href="http://www.icourse163.org/course/BIT-1001870001" id="link2"&gt;Advanced Python&lt;/a&gt;.&lt;/p&gt;, '\n']</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(soup.body.contents)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：返回的是列表。</p><p><strong>遍历方法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 遍历儿子结点</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.body.children:</span><br><span class="line">    print(child)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历子孙结点</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.body.descendants:</span><br><span class="line">    print(child)</span><br></pre></td></tr></table></figure><h2 id="2、标签树的上行遍历"><a href="#2、标签树的上行遍历" class="headerlink" title="2、标签树的上行遍历"></a>2、标签树的上行遍历</h2><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/5.png" class><p><strong>实例</strong>：遍历所有先辈节点，包括soup本身，所以要区别判断</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/6.png" class><h2 id="3、标签树的平行遍历"><a href="#3、标签树的平行遍历" class="headerlink" title="3、标签树的平行遍历"></a>3、标签树的平行遍历</h2><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/7.png" class><p><strong>注意：</strong></p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/8.png" class><p><strong>遍历</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.a.next_sibling:</span><br><span class="line">    print(sibling)<span class="comment"># 遍历后续结点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.a.previous_sibling:</span><br><span class="line">print(sibling)<span class="comment"># 遍历前续结点</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/9.png" class><h1 id="基于bs4库的HTML格式输出"><a href="#基于bs4库的HTML格式输出" class="headerlink" title="基于bs4库的HTML格式输出"></a>基于bs4库的HTML格式输出</h1><p>能否让HTML内容更加“友好”的显示？</p><h2 id="bs4库的prettify-方法"><a href="#bs4库的prettify-方法" class="headerlink" title="bs4库的prettify()方法"></a>bs4库的prettify()方法</h2><p>可以使读取的html内容格式化输出</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用于文本和标签</span></span><br><span class="line">soup.prettify() </span><br><span class="line">soup.a.prettify()</span><br></pre></td></tr></table></figure><h1 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h1><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-03/10.png" class><blockquote></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇总结 &lt;strong&gt;BeautifulSoup&lt;/strong&gt; 库的安装使用（补充了&lt;strong&gt;Xpath&lt;/strong&gt;）。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_02(requests库实例)</title>
    <link href="http://icewind-r.github.io/2020/06/30/Python%E7%88%AC%E8%99%AB-02/"/>
    <id>http://icewind-r.github.io/2020/06/30/Python%E7%88%AC%E8%99%AB-02/</id>
    <published>2020-06-30T09:58:18.000Z</published>
    <updated>2020-07-06T09:41:31.297Z</updated>
    
    <content type="html"><![CDATA[<p>这部分是爬虫初步的 <strong>爬取实例</strong> ，涉及网站、搜索、图片等查询。</p><a id="more"></a><hr><h1 id="网络爬虫"><a href="#网络爬虫" class="headerlink" title="网络爬虫"></a>网络爬虫</h1><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-02/1.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-02/6.png" class><h1 id="Robots协议"><a href="#Robots协议" class="headerlink" title="Robots协议"></a>Robots协议</h1><p><strong>作用</strong>：网站告知网络爬虫哪些页面可以抓取，哪些不行。</p><p><strong>形式：</strong>在网站根目录下的robots.txt文件</p><p>基本语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注释，*代表所有，/代表根目录 </span></span><br><span class="line">User‐agent: * </span><br><span class="line">Disallow: /</span><br></pre></td></tr></table></figure><p>百度robots协议查看：<a href="https://www.baidu.com/robots.txt" target="_blank" rel="noopener">https://www.baidu.com/robots.txt</a></p><h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><h2 id="1、爬取亚马逊商品信息"><a href="#1、爬取亚马逊商品信息" class="headerlink" title="1、爬取亚马逊商品信息"></a>1、爬取亚马逊商品信息</h2><p>在我们用简单的get方法爬取时，获取状态码显示503</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-02/2.png" class><p>返回的 r 中包含 request 请求。</p><p>通过<code>r.request.headers</code>查看头部信息，看到User-Agent选项不是浏览器的信息，可以得知亚马逊会组织非浏览器的访问。</p><p><strong>方法：</strong>更改头部信息，使该爬虫模拟浏览器登录。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kv = &#123;<span class="string">'user-agent'</span>:<span class="string">'Mozilla/5.0'</span>&#125;</span><br><span class="line">url = <span class="string">"https://www.amazon.cn/gp/product/B01M8L5Z3Y"</span></span><br><span class="line">r = requests.get(url, headers = kv)</span><br></pre></td></tr></table></figure><p>此时即可正常爬取。</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-02/3.png" class><h2 id="2、爬虫指定关键字到百度查询结果"><a href="#2、爬虫指定关键字到百度查询结果" class="headerlink" title="2、爬虫指定关键字到百度查询结果"></a>2、爬虫指定关键字到百度查询结果</h2><p>百度的关键词接口：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.baidu.com/s?wd=keyword</span><br></pre></td></tr></table></figure><p>输入keyword得到搜索引擎的搜索结果。</p><p>即对我们的requests库，构造这样的url即可。</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-02/4.png" class><h2 id="3、网络图片的爬取和存储"><a href="#3、网络图片的爬取和存储" class="headerlink" title="3、网络图片的爬取和存储"></a>3、网络图片的爬取和存储</h2><p>图片在网络上的存储地址以图片的后缀为结尾。</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-02/5.png" class><p>代码中，<code>r.content</code>是内容的二进制形式，写入目标文件可得到相应图片。</p><h1 id="补充（url拼接）"><a href="#补充（url拼接）" class="headerlink" title="补充（url拼接）"></a>补充（url拼接）</h1><p>如果遇到url的拼接问题，建议使用 ``urllib.parse<code>的</code>urljoin` 方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.youtube.com/'</span></span><br><span class="line">path = <span class="string">'/index.html'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>urljoin(url, path)</span><br><span class="line"><span class="string">'http://www.youtube.com/index.html'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url + path</span><br><span class="line"><span class="string">'http://www.youtube.com//index.html'</span></span><br></pre></td></tr></table></figure><p>可以解决一些url 用 + 连接符产生的问题。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这部分是爬虫初步的 &lt;strong&gt;爬取实例&lt;/strong&gt; ，涉及网站、搜索、图片等查询。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python爬虫_01(requests库)</title>
    <link href="http://icewind-r.github.io/2020/06/30/Python%E7%88%AC%E8%99%AB-01/"/>
    <id>http://icewind-r.github.io/2020/06/30/Python%E7%88%AC%E8%99%AB-01/</id>
    <published>2020-06-30T04:26:28.000Z</published>
    <updated>2020-07-08T02:12:39.769Z</updated>
    
    <content type="html"><![CDATA[<p>这部分是python记录爬虫功能的笔记，刚刚入门，这篇总结 <strong>requests</strong> 库的使用。</p><a id="more"></a><hr><p>关于更多requests库的知识，可以查看<a href="https://requests.readthedocs.io/zh_CN/latest/user/quickstart.html" target="_blank" rel="noopener">官方网站</a>。</p><p>request 库需要安装，比较容易，不再赘述。</p><p>requests库中有七个常用方法。</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/1.png" class><h1 id="get-方法"><a href="#get-方法" class="headerlink" title="get()方法"></a>get()方法</h1><p>获取一个网页最简单的方法就是</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url)</span><br></pre></td></tr></table></figure><p> 该方法用于构造一个向服务器请求资源的<code>Request</code>对象，该对象为requests库内部生成的。该方法返回的内容是一个包含服务器资源的<strong>Response</strong>对象，用<code>r</code>表示，代表一个Response对象。</p><p>get方法的完整使用如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requests.get(url [, params = <span class="literal">None</span>, **kwargs])</span><br></pre></td></tr></table></figure><blockquote><p>参数含义：</p><ul><li>url：拟获取页面的url链接</li><li>params：url中的额外参数，字典或字节流格式，可选</li><li>**kwargs：12个控制访问的参数</li></ul></blockquote><p>通过查看requests库的源码我们可以发现，七个方法中，其他六个方法都是对get的调用，所以也可认为只有一个get()方法。</p><h2 id="Response对象"><a href="#Response对象" class="headerlink" title="Response对象"></a>Response对象</h2><p>Response对象包含爬虫返回的所有内容。</p><h3 id="Response对象的属性"><a href="#Response对象的属性" class="headerlink" title="Response对象的属性"></a>Response对象的属性</h3><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/2.png" class><p>理解Requests库的异常</p><h1 id="爬取网页的通用代码框架"><a href="#爬取网页的通用代码框架" class="headerlink" title="爬取网页的通用代码框架"></a>爬取网页的通用代码框架</h1><p>网络连接有风险，异常处理很重要。</p><h3 id="Request对象的异常"><a href="#Request对象的异常" class="headerlink" title="Request对象的异常"></a>Request对象的异常</h3><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/3.png" class><h3 id="Response对象的异常"><a href="#Response对象的异常" class="headerlink" title="Response对象的异常"></a>Response对象的异常</h3><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/4.png" class><h2 id="爬取页面的通用代码框架"><a href="#爬取页面的通用代码框架" class="headerlink" title="爬取页面的通用代码框架"></a>爬取页面的通用代码框架</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url, timeout = <span class="number">30</span>)</span><br><span class="line">        r.raise_for_status() <span class="comment"># 如果状态码不是200，引发HTTPError异常</span></span><br><span class="line">        r.encoding = r.apparent_encoding <span class="comment"># 使得返回内容的解码是正确的</span></span><br><span class="line">        <span class="keyword">return</span> r.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'产生异常'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'http://www.baidu.com'</span></span><br><span class="line">    print(getHTMLText(url))</span><br></pre></td></tr></table></figure><h1 id="HTTP协议及requests库方法"><a href="#HTTP协议及requests库方法" class="headerlink" title="HTTP协议及requests库方法"></a>HTTP协议及requests库方法</h1><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/5.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/6.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/7.png" class><p><strong>一些方法的简单举例</strong></p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/8.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/9.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/10.png" class><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/11.png" class><h1 id="Requests库的主要方法解析"><a href="#Requests库的主要方法解析" class="headerlink" title="Requests库的主要方法解析"></a>Requests库的主要方法解析</h1><h2 id="1-requests-request-method-url-kwargs"><a href="#1-requests-request-method-url-kwargs" class="headerlink" title="1. requests.request(method, url, \kwargs)"></a>1. requests.request(<strong>method</strong>, <strong>url</strong>, <strong><em>\</em>kwargs</strong>)</h2><ul><li>method：请求方式，对应get/put/post等7种</li><li>url：拟获取页面的url链接</li><li>**kwargs：控制访问的参数，共13个</li></ul><h3 id="method的7种"><a href="#method的7种" class="headerlink" title="method的7种"></a>method的7种</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">r = requests.request(<span class="string">'GET'</span>, url, **kwargs)</span><br><span class="line">r = requests.request(<span class="string">'HEAD'</span>, url, **kwargs)</span><br><span class="line">r = requests.request(<span class="string">'POST'</span>, url, **kwargs)</span><br><span class="line">r = requests.request(<span class="string">'PUT'</span>, url, **kwargs)</span><br><span class="line">r = requests.request(<span class="string">'PATCH'</span>, url, **kwargs)</span><br><span class="line">r = requests.request(<span class="string">'delete'</span>, url, **kwargs)</span><br><span class="line">r = requests.request(<span class="string">'OPTIONS'</span>, url, **kwargs) <span class="comment"># 不常用</span></span><br></pre></td></tr></table></figure><h3 id="kwargs-控制访问的参数，均为可选项"><a href="#kwargs-控制访问的参数，均为可选项" class="headerlink" title="kwargs**: 控制访问的参数，均为可选项"></a>kwargs**: 控制访问的参数，均为可选项</h3><ol><li><p>params : 字典或字节序列，作为参数增加到url中</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/12.png" class></li><li><p>data : 字典、字节序列或文件对象，作为Request的内容</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/13.png" class></li><li><p>json : JSON格式的数据，作为Request的内容</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/14.png" class></li><li><p>headers : 字典，HTTP定制头</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/15.png" class></li><li><p>files : 字典类型，传输文件</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/16.png" class></li><li><p>timeout : 设定超时时间，秒为单位</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/17.png" class></li><li><p>proxies : 字典类型，设定访问代理服务器，可以增加登录认证</p><img src="/2020/06/30/Python%E7%88%AC%E8%99%AB-01/18.png" class></li><li><p>cookies : 字典或CookieJar，Request中的cookie</p></li><li><p>auth : 元组，支持HTTP认证功能</p></li><li><p>allow_redirects：True/False，默认为True，重定向开关</p></li><li><p>stream：True/False，默认为True，获取内容立即下载开关</p></li><li><p>verify：True/False，默认为True，认证SSL证书开关</p></li><li><p>cert：本地SSL证书路径</p></li></ol><h2 id="2-requests-get-url-params-None-kwargs"><a href="#2-requests-get-url-params-None-kwargs" class="headerlink" title="2. requests.get(url, params=None, \kwargs)"></a>2. requests.get(<strong>url</strong>, <strong>params=None</strong>, <strong><em>\</em>kwargs</strong>)</h2><p><strong>∙</strong> <strong>url</strong> : 拟获取页面的url链接</p><p><strong>∙</strong> <strong>params</strong> : url中的额外参数，字典或字节流格式，可选</p><p><strong>∙</strong> **kwargs: 12个控制访问的参数</p><h2 id="3-requests-head-url-kwargs"><a href="#3-requests-head-url-kwargs" class="headerlink" title="3. requests.head(url, \kwargs)"></a>3. requests.head(<strong>url</strong>, <strong><em>\</em>kwargs</strong>)</h2><p><strong>∙</strong> <strong>url</strong> : 拟获取页面的url链接</p><p><strong>∙</strong> **kwargs: 12个控制访问的参数</p><h2 id="4-requests-post-url-data-None-json-None-kwargs"><a href="#4-requests-post-url-data-None-json-None-kwargs" class="headerlink" title="4. requests.post(url, data=None, json=None, \kwargs)"></a>4. requests.post(<strong>url</strong>, <strong>data=None</strong>, <strong>json=None</strong>, <strong><em>\</em>kwargs</strong>)</h2><p><strong>∙</strong> <strong>url</strong> : 拟更新页面的url链接</p><p><strong>∙</strong> <strong>data</strong> : 字典、字节序列或文件，Request的内容</p><p><strong>∙</strong> <strong>json</strong> : JSON格式的数据，Request的内容</p><p><strong>∙</strong> **kwargs: 12个控制访问的参数</p><h2 id="5-requests-put-url-data-None-kwargs"><a href="#5-requests-put-url-data-None-kwargs" class="headerlink" title="5. requests.put(url, data=None, \kwargs)"></a>5. requests.put(<strong>url</strong>, <strong>data=None</strong>, <strong><em>\</em>kwargs</strong>)</h2><p><strong>∙</strong> <strong>url</strong> : 拟更新页面的url链接</p><p><strong>∙</strong> <strong>data</strong> : 字典、字节序列或文件，Request的内容</p><p><strong>∙</strong> **kwargs: 12个控制访问的参数</p><h2 id="6-requests-patch-url-data-None-kwargs"><a href="#6-requests-patch-url-data-None-kwargs" class="headerlink" title="6. requests.patch(url, data=None, \kwargs)"></a>6. requests.patch(<strong>url</strong>, <strong>data=None</strong>, <strong><em>\</em>kwargs</strong>)</h2><p><strong>∙</strong> <strong>url</strong> : 拟更新页面的url链接</p><p><strong>∙</strong> <strong>data</strong> : 字典、字节序列或文件，Request的内容</p><p><strong>∙</strong> **kwargs: 12个控制访问的参数</p><h2 id="7-requests-delete-url-kwargs"><a href="#7-requests-delete-url-kwargs" class="headerlink" title="7. requests.delete(url, \kwargs)"></a>7. requests.delete(<strong>url</strong>, <strong><em>\</em>kwargs</strong>)</h2><p><strong>∙</strong> <strong>url</strong> : 拟删除页面的url链接</p><p><strong>∙</strong> **kwargs: 12个控制访问的参数 </p><h1 id="其他注意事项"><a href="#其他注意事项" class="headerlink" title="其他注意事项"></a>其他注意事项</h1><h2 id="HTTP请求头常见参数"><a href="#HTTP请求头常见参数" class="headerlink" title="HTTP请求头常见参数"></a>HTTP请求头常见参数</h2><ol><li><code>User-Agent</code>:浏览器名称，如果我们使用爬虫发送请求，那么我们的<code>User-Agent</code>就是<code>Python</code>,很容易被反爬虫检测到；</li><li><code>Referer</code>:表明当前请求是从哪个URL过来的，这个一般也可以用来做反爬虫技术。如果不是从指定页面过来的，那么就不做相关的响应。</li><li><code>Cookie</code>:<code>http</code>协议视无状态的，也就是从一个人发送了两次请求，服务器没有能力知道这两个请求是否来自同一个人。因此这时候就用<code>cookie</code>来做标识。一般如果想要做登录后才能访问的网站，那么就需要发送<code>cookie</code>信息了。</li></ol><h2 id="常见响应状态码"><a href="#常见响应状态码" class="headerlink" title="常见响应状态码"></a>常见响应状态码</h2><ol><li><code>200</code>:请求正常，服务器正常返回数据；</li><li><code>301</code>:永久重定向，比如在访问<code>www.jingdong.com</code>的时候回重定向到<code>www.jd.com</code>；</li><li><code>302</code>:临时重定向，比如在访问一个需要登录的页面的时候，而此时没有登录，那么就会重定向到登录界面；</li><li><code>400</code>:请求的<code>url</code>在服务器上找不到，换句话说就是请求<code>url</code>错误；</li><li><code>403</code>:服务器拒绝访问，权限不够；</li><li><code>500</code>:服务器内部错误，可能是服务器出现<code>bug</code>了。</li></ol><h2 id="Cookies和Session"><a href="#Cookies和Session" class="headerlink" title="Cookies和Session"></a>Cookies和Session</h2><h3 id="cookies"><a href="#cookies" class="headerlink" title="cookies"></a>cookies</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">r = requests.get(<span class="string">'http://www.baidu.com'</span>) <span class="comment"># 获取百度的cookies</span></span><br><span class="line">print(r.cookies)    <span class="comment"># &lt;RequestsCookieJar[&lt;Cookie BDORZ=27315 for .baidu.com/&gt;]&gt;</span></span><br><span class="line"></span><br><span class="line">print(r.cookies.get_dict()) <span class="comment"># get_dict()方法得到cookies的字典信息： &#123;'BDORZ': '27315'&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.renren.com/PLogin.do'</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'email'</span>:<span class="string">'13287857692'</span>,</span><br><span class="line">    <span class="string">'password'</span>:<span class="string">'密码'</span></span><br><span class="line">&#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>:<span class="string">'Mozilla/5.0'</span>&#125;</span><br><span class="line"></span><br><span class="line">session = requests.session()</span><br><span class="line">session.post(url, data = data, headers = headers)</span><br><span class="line"></span><br><span class="line">response = session.get(<span class="string">'http://www.renren.com/974726184/profile'</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'renrne.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(response.text)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这部分是python记录爬虫功能的笔记，刚刚入门，这篇总结 &lt;strong&gt;requests&lt;/strong&gt; 库的使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_10(模块和包)</title>
    <link href="http://icewind-r.github.io/2020/06/28/Python-10/"/>
    <id>http://icewind-r.github.io/2020/06/28/Python-10/</id>
    <published>2020-06-28T00:02:19.000Z</published>
    <updated>2020-06-28T11:38:41.897Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>异常</strong>基本知识，本篇总结python中<strong>模块</strong>和<strong>包</strong>知识点。</p><a id="more"></a><hr><h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><p>python模块（Module），是一个python文件，以  .py 结尾，包含了python对象定义和python语句。模块能定义函数、类和变量，里面也可以有其他可执行代码。</p><h2 id="导入模块"><a href="#导入模块" class="headerlink" title="导入模块"></a>导入模块</h2><h3 id="导入模块方式"><a href="#导入模块方式" class="headerlink" title="导入模块方式"></a>导入模块方式</h3><ul><li>import 模块名</li><li>from 模块名 import 功能名</li><li>from 模块名 import *</li><li>import 模块名 as 别名</li><li>from 模块名 import 功能名 as 别名</li></ul><h3 id="导入方式详解"><a href="#导入方式详解" class="headerlink" title="导入方式详解"></a>导入方式详解</h3><h4 id="import"><a href="#import" class="headerlink" title="import"></a>import</h4><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> 模块名</span><br><span class="line"><span class="keyword">import</span> 模块名<span class="number">1</span>,模块名<span class="number">2.</span>.. <span class="comment"># 不推荐</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用功能</span></span><br><span class="line">模块名.功能名()</span><br></pre></td></tr></table></figure></li></ul><h4 id="from-…-import-…"><a href="#from-…-import-…" class="headerlink" title="from … import …"></a>from … import …</h4><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> 功能名<span class="number">1</span>,功能名<span class="number">2.</span>..</span><br></pre></td></tr></table></figure></li><li><p>体验</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line">print(sqrt(<span class="number">9</span>))</span><br></pre></td></tr></table></figure></li></ul><h4 id="from-模块名-import"><a href="#from-模块名-import" class="headerlink" title="from 模块名 import *"></a>from 模块名 import *</h4><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure></li><li><p>体验</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> *</span><br><span class="line">print(sqrt(<span class="number">9</span>))</span><br></pre></td></tr></table></figure></li></ul><h4 id="as-定义别名"><a href="#as-定义别名" class="headerlink" title="as 定义别名"></a>as 定义别名</h4><p>如果定义了别名，只能使用别名，不可再使用模块名。</p><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模块定义别名</span></span><br><span class="line"><span class="keyword">import</span> 模块名 <span class="keyword">as</span> 别名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 功能定义别名</span></span><br><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> 功能名 <span class="keyword">as</span> 别名</span><br></pre></td></tr></table></figure></li><li><p>体验</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模块别名</span></span><br><span class="line"><span class="keyword">import</span> time <span class="keyword">as</span> tt</span><br><span class="line"></span><br><span class="line">tt.sleep(<span class="number">2</span>)</span><br><span class="line">print(<span class="string">'hello'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 功能别名</span></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep <span class="keyword">as</span> sl</span><br><span class="line">sl(<span class="number">2</span>)</span><br><span class="line">print(<span class="string">'hello'</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="制作模块"><a href="#制作模块" class="headerlink" title="制作模块"></a>制作模块</h2><p>在python中，每个python文件都可以作为一个模块，模块的名字就是文件的名字。也就是说自定义模块必须符合标识符命名规则。</p><h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><p>新建一个python文件，命名<code>my_module1.py</code>，并定义<code>testA</code>函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testA</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    print(a + b)</span><br></pre></td></tr></table></figure><h3 id="测试模块"><a href="#测试模块" class="headerlink" title="测试模块"></a>测试模块</h3><p>在实际开发中，当一个开发人员编写完一个模块后，为了让模块能够在项目中达到想要的效果，会自行在py文件中添加一些测试信息。例如，在<code>my_module1.py</code>文件中添加测试代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testA</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    print(a + b)</span><br><span class="line">    </span><br><span class="line">testA(<span class="number">1</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>此时，无论是当前文件，还是其他已经导入了该模块的文件，在运行的时候都会自动执行<code>testA</code>函数的调用，即结果2。</p><p>为此，解决方法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testA</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    print(a + b)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 只有在当前文件调用该函数，其他导入的文件内不符合该条件，则不执行下述测试代码</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    testA(<span class="number">1</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><blockquote><p>关于 <code>__name__</code>：</p><ul><li><p>若在本文件内运行该函数，则为<code>__main__</code></p></li><li><p>若在其他文件，例如导入该文件模块，则为my_module（文件名）</p></li></ul></blockquote><h1 id="包"><a href="#包" class="headerlink" title="包"></a>包</h1><p>包将有联系的模块组织在一起，即放到同一个文件夹下，并且在文件夹内创建一个名字为<code>__init__.py</code>文件，那么这个文件夹就称之为<strong>包</strong>。</p><h2 id="制作包"><a href="#制作包" class="headerlink" title="制作包"></a>制作包</h2><p>右键 — [new] — [Python  Package] — 输入包名 — [OK] — 新建功能模块（有联系的模块）。</p><p>注意：新建包后，包内自动创建<code>__init__.py</code>文件，控制着包的导入行为。</p><h3 id="体验"><a href="#体验" class="headerlink" title="体验"></a>体验</h3><ol><li><p>新建包<code>myPackage</code></p></li><li><p>新建包内模块：<code>my_module1</code>和 <code>my_module2</code></p></li><li><p>模块内代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># my_module1</span></span><br><span class="line">print(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">info_print1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'my_module1'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># my_module2</span></span><br><span class="line">print(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">info_print2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'my_module2'</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> 包名.模块名</span><br><span class="line"></span><br><span class="line">包名.模块名.目标</span><br></pre></td></tr></table></figure><h4 id="体验-1"><a href="#体验-1" class="headerlink" title="体验"></a>体验</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myPackage.my_module1</span><br><span class="line"></span><br><span class="line">myPackage.my_module1.info_print1()</span><br></pre></td></tr></table></figure><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>注意：必须在<code>__init__.py</code>文件中添加<code>__all__ = []</code>，控制允许导入的模块列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> 包名 <span class="keyword">import</span> *</span><br><span class="line">模块名.目标</span><br></pre></td></tr></table></figure><h4 id="体验-2"><a href="#体验-2" class="headerlink" title="体验"></a>体验</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> myPackage <span class="keyword">import</span> *</span><br><span class="line">my_module1.info_print1()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;异常&lt;/strong&gt;基本知识，本篇总结python中&lt;strong&gt;模块&lt;/strong&gt;和&lt;strong&gt;包&lt;/strong&gt;知识点。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_9(异常)</title>
    <link href="http://icewind-r.github.io/2020/06/27/Python-9/"/>
    <id>http://icewind-r.github.io/2020/06/27/Python-9/</id>
    <published>2020-06-27T01:11:20.000Z</published>
    <updated>2020-06-29T12:49:52.529Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>面向对象</strong>基本知识，本篇总结python中重要<strong>异常处理</strong>知识点。</p><a id="more"></a><hr><h1 id="异常的写法"><a href="#异常的写法" class="headerlink" title="异常的写法"></a>异常的写法</h1><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    可能发生错误的代码</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    如果出现异常执行的代码</span><br></pre></td></tr></table></figure><h2 id="捕获指定异常"><a href="#捕获指定异常" class="headerlink" title="捕获指定异常"></a>捕获指定异常</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    可能发生错误的代码</span><br><span class="line"><span class="keyword">except</span> 异常类型:</span><br><span class="line">    如果捕获到该异常类型执行的代码</span><br></pre></td></tr></table></figure><h3 id="体验"><a href="#体验" class="headerlink" title="体验"></a>体验</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(num) <span class="comment"># num不存在</span></span><br><span class="line"><span class="keyword">except</span> NameError:</span><br><span class="line">    print(<span class="string">'有错误'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><ol><li>如果尝试执行的代码的异常类型和要捕获的异常类型不一致，则无法捕获该异常。</li><li>一般try下方只放一行尝试执行的代码。</li></ol></blockquote><h3 id="捕获多个指定异常"><a href="#捕获多个指定异常" class="headerlink" title="捕获多个指定异常"></a>捕获多个指定异常</h3><p>当捕获多个异常时，可以把要捕获的异常类型的名字，放在except后，并使用元组的方式进行书写。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> (NameError, ZeroDivisionError): <span class="comment"># 当不确定异常的类型时，可以选择多个。</span></span><br><span class="line">    print(<span class="string">'有错误'</span>)</span><br></pre></td></tr></table></figure><h3 id="捕获异常描述信息"><a href="#捕获异常描述信息" class="headerlink" title="捕获异常描述信息"></a>捕获异常描述信息</h3><p>当捕获多个异常时，可以把要捕获的异常类型的名字，放在except后，并使用元组的方式进行书写。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(num)</span><br><span class="line"><span class="keyword">except</span> (NameError, ZeroDivisionError) <span class="keyword">as</span> result:</span><br><span class="line">    print(result) <span class="comment"># 结果：division by zero</span></span><br></pre></td></tr></table></figure><h3 id="捕获所有异常"><a href="#捕获所有异常" class="headerlink" title="捕获所有异常"></a>捕获所有异常</h3><p>Exception是所有程序异常类的父类。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(num)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    print(result)</span><br></pre></td></tr></table></figure><h2 id="异常的else"><a href="#异常的else" class="headerlink" title="异常的else"></a>异常的else</h2><p>else表示的是如果没有异常要执行的代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(num)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    print(result)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h2 id="异常的finally"><a href="#异常的finally" class="headerlink" title="异常的finally"></a>异常的finally</h2><p>finally表示的是无论是否异常都要执行的代码，例如关闭文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'test.txt'</span>, <span class="string">'r'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">   f = open(<span class="string">'test.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'成功打开'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><h1 id="异常的传递"><a href="#异常的传递" class="headerlink" title="异常的传递"></a>异常的传递</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'test.txt'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            content = f.readline()</span><br><span class="line">            <span class="keyword">if</span> len(content) == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">           time.sleep(<span class="number">2</span>)</span><br><span class="line">            print(content)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="comment"># 如果在读取文件的过程中，产生了异常，那么就会捕获到</span></span><br><span class="line">        <span class="comment"># 比如按下Ctrl + C</span></span><br><span class="line">        print(<span class="string">'意外终止了读取数据'</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        f.close()</span><br><span class="line">        print(<span class="string">'关闭文件'</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'打开文件失败'</span>)</span><br></pre></td></tr></table></figure><h1 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h1><p>在python中，抛出自定义异常的语法为<code>raise 异常类对象</code>。</p><p>需求：密码长度不足，则报异常（输入密码少于3位，则报错，抛出自定义异常，并捕获该异常）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义异常类，继承Exception</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShortInputError</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, length, min_len)</span>:</span></span><br><span class="line">        self.length = length</span><br><span class="line">        self.min_len = min_len</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 设置抛出异常的描述信息</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'你输入的长度为<span class="subst">&#123;self.length&#125;</span>，不能少于<span class="subst">&#123;self.min_len&#125;</span>个字符'</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        con = input(<span class="string">'请输入密码：'</span>)</span><br><span class="line">        <span class="keyword">if</span> len(con) &lt; <span class="number">3</span>: <span class="comment"># 即输入密码不符合要求</span></span><br><span class="line">            <span class="keyword">raise</span> ShortInputError(len(con), <span class="number">3</span>) <span class="comment"># 抛出异常 raise</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">        print(result)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'密码输入完成'</span>)</span><br></pre></td></tr></table></figure><h1 id="with-…-as"><a href="#with-…-as" class="headerlink" title="with … as"></a>with … as</h1><p>with as 语句的<strong>结构</strong>如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> expression [<span class="keyword">as</span> variable]:</span><br><span class="line">    <span class="keyword">with</span>-block</span><br></pre></td></tr></table></figure><p>with…as语句<strong>执行顺序</strong>：<br>–&gt;首先执行expression里面的<code>__enter__</code>函数，它的返回值会赋给<code>as</code>后面的<code>variable</code>，想让它返回什么就返回什么，只要你知道怎么处理就可以了，如果不写<code>as variable</code>，返回值会被忽略。</p><p>–&gt;然后，开始执行<code>with-block</code>中的语句，不论成功失败(比如发生异常、错误，设置sys.exit() )，在<code>with-block</code>执行完成后，会执行<code>expression</code>中的<code>__exit__</code>函数。</p><p>这个和<code>try finally</code>函数有什么关系呢？</p><p>其实，这样的过程<strong>等价</strong>于：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:  </span><br><span class="line">    执行 __enter__的内容  </span><br><span class="line">    执行 with_block.  </span><br><span class="line"><span class="keyword">finally</span>:  </span><br><span class="line">    执行 __exit__内容</span><br></pre></td></tr></table></figure><h2 id="简单形式"><a href="#简单形式" class="headerlink" title="简单形式"></a>简单形式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try：</span><br><span class="line">  f &#x3D; open(&#39;a.txt&#39;, &#39;w&#39;)</span><br><span class="line">  f.write(&#39;Hello!&#39;)</span><br><span class="line">finally:</span><br><span class="line">  f.close()</span><br></pre></td></tr></table></figure><p><strong>等价</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open(&#39;a.txt&#39;, &#39;w&#39;) as f:</span><br><span class="line">  f.write(&#39;Hello!&#39;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;面向对象&lt;/strong&gt;基本知识，本篇总结python中重要&lt;strong&gt;异常处理&lt;/strong&gt;知识点。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_8(面向对象)</title>
    <link href="http://icewind-r.github.io/2020/06/25/Python-8/"/>
    <id>http://icewind-r.github.io/2020/06/25/Python-8/</id>
    <published>2020-06-25T10:45:31.000Z</published>
    <updated>2020-06-29T10:59:12.010Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>文件</strong>基本知识，本篇总结python中重要<strong>面向对象</strong>知识点。</p><a id="more"></a><hr><h1 id="类与对象的创建"><a href="#类与对象的创建" class="headerlink" title="类与对象的创建"></a>类与对象的创建</h1><h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2><p>在不同的python解释器下，类分为两种 <strong>经典类</strong> 和 <strong>新式类</strong></p><ul><li><p>不由任意内置类型派生出的类，称为经典类（python2.0）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> 类名<span class="params">()</span>:</span></span><br><span class="line">    代码</span><br></pre></td></tr></table></figure></li><li><p>新式类（python3.0）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> 类名<span class="params">(object)</span>:</span> <span class="comment"># object 为 python中的顶级类</span></span><br><span class="line">    代码</span><br></pre></td></tr></table></figure></li></ul><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对象名 = 类名()</span><br></pre></td></tr></table></figure></li></ul><p><strong>例子</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Washer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wash</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'洗衣服'</span>)</span><br><span class="line"><span class="comment"># 创建对象</span></span><br><span class="line">haier = Washer() <span class="comment"># 对象名 = 类名()</span></span><br><span class="line">print(haier) <span class="comment"># 打印对象</span></span><br><span class="line">haier.wash() <span class="comment"># 使用方法</span></span><br></pre></td></tr></table></figure><h2 id="self"><a href="#self" class="headerlink" title="self"></a>self</h2><p>self指的是调用函数的对象。</p><p>即上面代码中函数内打印的self和函数外打印的haier相同。</p><h2 id="添加和获取对象属性"><a href="#添加和获取对象属性" class="headerlink" title="添加和获取对象属性"></a>添加和获取对象属性</h2><p>属性即是特征，对象属性既可以在类外面添加和获取，也能在类里面添加和获取。</p><h3 id="类外面添加对象属性"><a href="#类外面添加对象属性" class="headerlink" title="类外面添加对象属性"></a>类外面添加对象属性</h3><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对象名.属性名 = 值</span><br></pre></td></tr></table></figure></li><li><p>例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 属性名为自定义的</span></span><br><span class="line">haier.width = <span class="number">500</span></span><br><span class="line">haier.height = <span class="number">800</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="类外面获取对象属性"><a href="#类外面获取对象属性" class="headerlink" title="类外面获取对象属性"></a>类外面获取对象属性</h3><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对象名.属性名</span><br></pre></td></tr></table></figure></li></ul><h3 id="类里面获取对象属性"><a href="#类里面获取对象属性" class="headerlink" title="类里面获取对象属性"></a>类里面获取对象属性</h3><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.属性名</span><br></pre></td></tr></table></figure></li></ul><h2 id="魔法方法"><a href="#魔法方法" class="headerlink" title="魔法方法"></a>魔法方法</h2><p>在python中，<code>__xx__()</code>函数叫做魔法方法，指的是与有特殊功能的函数。</p><h3 id="init"><a href="#init" class="headerlink" title="__init__()"></a><code>__init__()</code></h3><h4 id="体验-init"><a href="#体验-init" class="headerlink" title="体验__init__()"></a>体验<code>__init__()</code></h4><p><code>__init__()</code>方法作用：初始化对象，设置与生俱来的初始化属性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Washer</span><span class="params">()</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#定义__init__()，添加实例属性</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment">#添加实例属性</span></span><br><span class="line">        self.width = <span class="number">500</span></span><br><span class="line">        self.height = <span class="number">800</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_info</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 类里面调用实例属性，注意：不用在该方法内调用`__init__()`方法</span></span><br><span class="line">        print(<span class="string">f'洗衣机的宽度为<span class="subst">&#123;self.width&#125;</span>，高度为<span class="subst">&#123;self.height&#125;</span>'</span>)</span><br><span class="line">        </span><br><span class="line">haier = Washer()</span><br><span class="line">haier.print_info() <span class="comment"># 不用传递参数</span></span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><ul><li><code>__init__()</code>方法，在创建一个对象时默认被调用。</li><li><code>__init__(self)</code>中的self参数，不需要开发者传递，python解释器会自动把当前的对象引用传递过去。</li></ul></blockquote><h4 id="带参数的-init"><a href="#带参数的-init" class="headerlink" title="带参数的__init__()"></a>带参数的<code>__init__()</code></h4><p>思考：一个类可以创建多个对象，如何对不同的对象设置不同的初始化属性呢？</p><p>可以使用传递参数的init方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Washer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, width, height)</span>:</span></span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_info</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'洗衣机的宽度为<span class="subst">&#123;self.width&#125;</span>，高度为<span class="subst">&#123;self.height&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">haier1 = Washer(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">haier1.print_info()</span><br><span class="line"></span><br><span class="line">haier2 = Washer(<span class="number">30</span>, <span class="number">40</span>)</span><br><span class="line">haier2.print_info()</span><br></pre></td></tr></table></figure><h3 id="str"><a href="#str" class="headerlink" title="__str__()"></a><code>__str__()</code></h3><p>当我们使用print输出对象的时候，默认打印对象的内存地址，如果类定义了<code>__str__()</code>方法，那么就会打印 从这个方法中return的数据。</p><blockquote><p>该方法一般用于返回一些解释说明的语句</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Washer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, width, height)</span>:</span></span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'这是海尔洗衣机的说明书'</span> </span><br><span class="line"></span><br><span class="line">haier1 = Washer(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">print(haier1) <span class="comment"># 这是海尔洗衣机的说明书</span></span><br></pre></td></tr></table></figure><h3 id="del"><a href="#del" class="headerlink" title="__del__()"></a><code>__del__()</code></h3><p>当删除对象时，python解释器就会默认调用该方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Washer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, width, height)</span>:</span></span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;self&#125;</span>对象已经被销毁'</span>)</span><br><span class="line">  </span><br><span class="line">haier1 = Washer(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> haier1</span><br></pre></td></tr></table></figure><p><strong>拓展</strong><br>我们都知道Python一切皆对象，那么Python究竟是怎么管理对象的呢？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.b = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line"><span class="comment"># 返回类内部所有属性和方法对应的字典</span></span><br><span class="line">print(A.__dict__)</span><br><span class="line"><span class="comment"># 返回实例属性和值组成的字典</span></span><br><span class="line">print(a.__dict__)</span><br></pre></td></tr></table></figure><p>结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'__module__'</span>: <span class="string">'__main__'</span>, <span class="string">'a'</span>: <span class="number">0</span>, <span class="string">'__init__'</span>: &lt;function A.__init__ at <span class="number">0x01719610</span>&gt;, <span class="string">'__dict__'</span>: &lt;attribute <span class="string">'__dict__'</span> of <span class="string">'A'</span> objects&gt;, <span class="string">'__weakref__'</span>: &lt;attribute <span class="string">'__weakref__'</span> of <span class="string">'A'</span> objects&gt;, <span class="string">'__doc__'</span>: <span class="literal">None</span>&#125;</span><br><span class="line">&#123;<span class="string">'b'</span>: <span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure><ul><li><p>由此可见， 类的静态函数、类函数、普通函数、全局变量以及一些内置的属性都是放在<strong>类<strong>dict</strong></strong>里的。</p></li><li><p><strong>对象的<strong>dict</strong></strong>中存储了一些self.xxx的一些东西</p></li></ul><h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><p>Python面向对象的继承指的是多个类之间的所属关系，即子类默认继承父类的所有属性和方法，具体如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 父类A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.num = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">info_print</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 子类B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span> <span class="comment"># 继承写法</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">result = B()</span><br><span class="line">result.info_print() <span class="comment"># 1</span></span><br></pre></td></tr></table></figure><p>继承分为单继承和多继承两种。</p><h2 id="单继承"><a href="#单继承" class="headerlink" title="单继承"></a>单继承</h2><p>只有一个父类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h2 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h2><p>有多个父类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A, B)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><blockquote><p>注意：当一个类有多个父类的时候，默认使用第一个父类的同名属性和方法。</p></blockquote><p><strong>拓展：</strong>查看一个类的层级继承关系</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(类.__mro__)</span><br></pre></td></tr></table></figure><h2 id="子类调用父类同名方法和属性"><a href="#子类调用父类同名方法和属性" class="headerlink" title="子类调用父类同名方法和属性"></a>子类调用父类同名方法和属性</h2><p>通过师傅徒弟案例和学校的多继承完成演示（相应含义已在注释部分说明）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 师傅类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Master</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.kongfu =  <span class="string">'经典配方'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_cake</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'运用的技术：<span class="subst">&#123;self.kongfu&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 学校类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">School</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.kongfu = <span class="string">'新式配方'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_cake</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'运用的技术：<span class="subst">&#123;self.kongfu&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 徒弟类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Prentice</span><span class="params">(School, Master)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.kongfu = <span class="string">'独创配方'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_cake</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 加入自己的init方法原因：如果先调用了父类的属性和方法，父类属性回覆盖子类属性</span></span><br><span class="line">        self.__init__()</span><br><span class="line">        print(<span class="string">f'运用的技术：<span class="subst">&#123;self.kongfu&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 子类调用父类的同名方法和属性：即把父类的同名方法和属性再次封装</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_master_cake</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 父类名.函数</span></span><br><span class="line">        Master.__init__(self) <span class="comment"># 调用初始化的原因：这里想要调用父类的同名方法和属性，属性在父类的init方法中被初始化，所以此处再次调用</span></span><br><span class="line">        Master.make_cake(self)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_school_cake</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 父类名.函数</span></span><br><span class="line">        School.__init__(self)</span><br><span class="line">        School.make_cake(self)</span><br><span class="line"></span><br><span class="line">daqiu = Prentice()</span><br><span class="line">daqiu.make_master_cake()</span><br><span class="line">daqiu.make_school_cake()</span><br></pre></td></tr></table></figure><h2 id="super-函数"><a href="#super-函数" class="headerlink" title="super()函数"></a>super()函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">super().__init__()</span><br><span class="line">super().make_cake()</span><br></pre></td></tr></table></figure><blockquote><p>注意：使用super()可以自动查找父类。调用顺序遵循<code>__mro__</code>的类属性顺序。比较适合单继承使用。</p></blockquote><h1 id="私有权限"><a href="#私有权限" class="headerlink" title="私有权限"></a>私有权限</h1><h2 id="定义私有属性和方法"><a href="#定义私有属性和方法" class="headerlink" title="定义私有属性和方法"></a>定义私有属性和方法</h2><p>设置私有权限的方法：在属性名 和 方法名 前面 加上两个下划线__。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.kongfu = <span class="string">'独创配方'</span></span><br><span class="line">    <span class="comment"># 定义私有属性</span></span><br><span class="line">    self.__money = <span class="number">200</span></span><br><span class="line"><span class="comment"># 定义私有方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__info_print</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(self.__money)</span><br></pre></td></tr></table></figure><blockquote><p>注意：私有属性和私有方法只能在类里面访问和修改</p></blockquote><h2 id="获取和修改私有属性"><a href="#获取和修改私有属性" class="headerlink" title="获取和修改私有属性"></a>获取和修改私有属性</h2><p>自定义get和set方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_money</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> self.__money</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_money</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.__money = <span class="number">100</span></span><br></pre></td></tr></table></figure><h1 id="保护权限"><a href="#保护权限" class="headerlink" title="保护权限"></a>保护权限</h1><p>以单下划线开头。</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="面向对象的三个特性"><a href="#面向对象的三个特性" class="headerlink" title="面向对象的三个特性"></a>面向对象的三个特性</h2><ul><li>封装<ul><li>将属性和方法书写到类里的操作</li><li>封装可以为属性和方法添加私有权限</li></ul></li><li>继承<ul><li>默认继承父类的所有属性和方法</li><li>子类可以重写父类的属性和方法</li></ul></li><li>多态<ul><li>传入不同的对象，产生不同的结果</li></ul></li></ul><h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>定义：多态是一种使用对象的方式，子类重写父类方法，调用不同子类对象的相同父类方法，可以产生不同的执行结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">work</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArmyDog</span><span class="params">(Dog)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">work</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'追击敌人'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DrugDog</span><span class="params">(Dog)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">work</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'追查毒品'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">work_with_dog</span><span class="params">(self, dog)</span>:</span></span><br><span class="line">        dog.work()</span><br><span class="line"></span><br><span class="line">ad = ArmyDog()</span><br><span class="line">dd = DrugDog()</span><br><span class="line">person1 = Person()</span><br><span class="line"><span class="comment"># 多态调用</span></span><br><span class="line">person1.work_with_dog(ad) <span class="comment"># 追击敌人</span></span><br><span class="line">person1.work_with_dog(dd) <span class="comment"># 追查毒品</span></span><br></pre></td></tr></table></figure><h2 id="类属性和实例属性"><a href="#类属性和实例属性" class="headerlink" title="类属性和实例属性"></a>类属性和实例属性</h2><h3 id="设置和访问类属性"><a href="#设置和访问类属性" class="headerlink" title="设置和访问类属性"></a>设置和访问类属性</h3><ul><li>类属性就是 <strong>类对象</strong> 所拥有的属性，它被 <strong>该类的所有实例对象</strong> 所共有。</li><li>类属性可以使用 <strong>类对象</strong> 或 <strong>实例对象</strong> 访问。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">    tooth = <span class="number">10</span> <span class="comment"># 设置类属性</span></span><br><span class="line"></span><br><span class="line">dog1 = Dog()</span><br><span class="line">dog2 = Dog()</span><br><span class="line"></span><br><span class="line">print(Dog.tooth)</span><br><span class="line">print(dog1.tooth)</span><br><span class="line">print(dog2.tooth)</span><br></pre></td></tr></table></figure><blockquote><p>类属性的优点：</p><ul><li>记录的某项数据始终保持一致，则定义类属性。</li><li>实例属性要求 <strong>每个对象 *<em>为其 单独开辟一份内存空间 来记录数据，而 *</em>类属性</strong> 为全人类所共有，仅占用一份内存，更加节省内存空间。</li></ul></blockquote><h3 id="修改类属性"><a href="#修改类属性" class="headerlink" title="修改类属性"></a>修改类属性</h3><p>类属性只能通过类对象修改，不能通过实例对象修改，如果通过实例对象修改类属性，表示的是创建了一个实例属性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改实例属性</span></span><br><span class="line">Dog.tooth = <span class="number">12</span></span><br><span class="line"><span class="comment"># 修改实例属性</span></span><br><span class="line">dog1.tooth = <span class="number">20</span></span><br></pre></td></tr></table></figure><h2 id="类方法和静态方法"><a href="#类方法和静态方法" class="headerlink" title="类方法和静态方法"></a>类方法和静态方法</h2><h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><ul><li><p>特点</p><p>需要用<strong>装饰器</strong><code>@classmethod</code>；来标识其为类方法，对于类方法，第一个参数必须为类对象，一半以<code>cls</code>作为第一个参数。</p></li><li><p>使用场景</p><p>当方法中需要使用类对象（如访问私有类属性等）时，定义类方法</p><p>类方法一般和类属性配合使用</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">    __touth = <span class="number">10</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_tooth</span><span class="params">(cls)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> cls.__tooth</span><br><span class="line">    </span><br><span class="line">dog1 = Dog()</span><br><span class="line">result = dog1.get_tooth()</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><h3 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h3><ul><li><p>特点</p><p>需要通过装饰器 <code>@staticmethod</code>来进行修饰，静态方法既不需要传递类对象，也不需要传递实例对象（形参没有self/cls）。</p><p>静态方法也能通过 <strong>实例对象</strong> 和 <strong>类对象</strong> 去访问。</p></li><li><p>使用场景</p><p>当方法中既不需要使用实例对象，也不需要使用类对象时，定义静态方法。</p><p>取消不需要的参数传递，有利于 减少不必要的内存占用和性能消耗。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">info_print</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">'该类用于创建Dog'</span>)</span><br><span class="line">    </span><br><span class="line">dog1 = Dog()</span><br><span class="line"><span class="comment"># 静态方法既可以使用对象访问，又可以使用类访问</span></span><br><span class="line">dog1.info_print()</span><br><span class="line">Dog.info_print()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;文件&lt;/strong&gt;基本知识，本篇总结python中重要&lt;strong&gt;面向对象&lt;/strong&gt;知识点。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_7(文件)</title>
    <link href="http://icewind-r.github.io/2020/06/24/Python-7/"/>
    <id>http://icewind-r.github.io/2020/06/24/Python-7/</id>
    <published>2020-06-24T13:56:11.000Z</published>
    <updated>2020-06-29T12:59:58.994Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>函数</strong>基本知识，本篇总结python中<strong>文件</strong>的相关操作。</p><a id="more"></a><hr><h1 id="文件的基本操作"><a href="#文件的基本操作" class="headerlink" title="文件的基本操作"></a>文件的基本操作</h1><ol><li>打开文件</li><li>读写等操作</li><li>关闭文件</li></ol><h2 id="打开"><a href="#打开" class="headerlink" title="打开"></a>打开</h2><p>在python中，使用open函数，可以打开一个已经存在的文件，或者创建一个新文件，语法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(name, mode, encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure><ul><li>name：是要打开的目标文件名的字符串（可以包含具体路径）</li><li>mode：设置打开文件的模式（访问模式）：只读、只写、追加等</li><li>encoding：指定编码</li></ul><h2 id="打开文件模式"><a href="#打开文件模式" class="headerlink" title="打开文件模式"></a>打开文件模式</h2><table><thead><tr><th align="left">模式</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">r</td><td align="left">以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td></tr><tr><td align="left">rb</td><td align="left">以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。一般用于非文本文件如图片等。</td></tr><tr><td align="left">r+</td><td align="left">打开一个文件用于读写。文件指针将会放在文件的开头。</td></tr><tr><td align="left">rb+</td><td align="left">以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</td></tr><tr><td align="left">w</td><td align="left">打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td></tr><tr><td align="left">wb</td><td align="left">以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td></tr><tr><td align="left">w+</td><td align="left">打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td></tr><tr><td align="left">wb+</td><td align="left">以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td></tr><tr><td align="left">a</td><td align="left">打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td align="left">ab</td><td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td align="left">a+</td><td align="left">打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td></tr><tr><td align="left">ab+</td><td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td></tr></tbody></table><blockquote><p>注意：</p><ul><li>只要带 b 的，都是 以二进制格式打开文件</li><li>带 + 的，打开文件用于读写</li><li>a ，文件指针在结尾</li></ul></blockquote><img src="/2020/06/24/Python-7/1.png" class><blockquote><p> 注：</p><ul><li>Truncate：截断</li><li>Initial Position：初始位置</li></ul></blockquote><p><strong>使用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'test.txt'</span>, <span class="string">'w'</span>) <span class="comment"># f代表文件对象</span></span><br></pre></td></tr></table></figure><h2 id="文件对象方法"><a href="#文件对象方法" class="headerlink" title="文件对象方法"></a>文件对象方法</h2><h3 id="写"><a href="#写" class="headerlink" title="写"></a>写</h3><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件对象.write(<span class="string">'内容'</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="读"><a href="#读" class="headerlink" title="读"></a>读</h3><ul><li><p><strong>read</strong>()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件对象.read(num)</span><br></pre></td></tr></table></figure><blockquote><p>num表示要从文件中读取的数据的长度（单位是字节），可省略</p></blockquote></li><li><p><strong>readlines</strong>()</p><p>readlines可以按照行的方式把整个文件中的内容进行一次性读取，并且返回的是一个列表，其中每行的数据为一个元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'test.txt'</span>)</span><br><span class="line">content = f.readlines() <span class="comment"># ['aa\n','bb\n','cc']</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></li><li><p><strong>readline</strong>()</p><p>一次读取一行内容</p></li></ul><h3 id="移动文件指针-seek"><a href="#移动文件指针-seek" class="headerlink" title="移动文件指针__seek()"></a>移动文件指针__seek()</h3><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件对象.seek(偏移量, 起始位置)</span><br></pre></td></tr></table></figure><blockquote><p>起始位置：</p><ul><li>0：文件开头</li><li>1：当前位置</li><li>2：文件结尾</li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'test,txt'</span>, <span class="string">'r+'</span>)</span><br><span class="line">f.seek(<span class="number">2</span>, <span class="number">0</span>) <span class="comment"># 从开头位置，偏移两个字符，即第三个字符开始读取</span></span><br><span class="line">f.seek(<span class="number">0</span>) <span class="comment">#  &lt;=&gt; seek(0, 0),即从文件的最开始读取</span></span><br></pre></td></tr></table></figure><h1 id="文件备份"><a href="#文件备份" class="headerlink" title="文件备份"></a>文件备份</h1><p>需求：用户输入当前目录下任意文件名，程序完成对该文件的备份功能（test[备份].txt）</p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li>接收用户输入的文件名</li><li>规划备份文件名</li><li>备份文件写入数据</li></ol><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><ol><li><p>接受用户输入目标文件名</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">old_name = input(<span class="string">'请输入您要备份的文件名：'</span>)</span><br></pre></td></tr></table></figure></li><li><p>规划备份文件名</p><ul><li>提取目标文件后缀（字符串最后的一个点才是后缀的点）</li><li>组织备份的文件名，xx[备份]后缀</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以sound.txt.mp3文件名为例</span></span><br><span class="line"></span><br><span class="line">index = old_name.rfind(<span class="string">'.'</span>)<span class="comment"># 提取文件后缀名中“.”的下标   9</span></span><br><span class="line"><span class="comment"># old_name[:index]  源文件名（无后缀）   sound.txt</span></span><br><span class="line"><span class="comment"># old_name[index:]  后缀名.mp3</span></span><br><span class="line"></span><br><span class="line">new_name = old_name[:index] + <span class="string">'[备份]'</span> + old_name[index:]</span><br></pre></td></tr></table></figure></li><li><p>备份文件写入数据</p><ul><li>打开源文件 和 备份文件</li><li>将源文件数据写入备份文件</li><li>关闭文件</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">old_f = open(old_name, <span class="string">'rb'</span>) <span class="comment"># 以二进制的方式读写</span></span><br><span class="line">new_f = open(new_name, <span class="string">'wb'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    con = old_f.read(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">if</span> len(con) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">#表示读完，退出循环</span></span><br><span class="line">    new_f.write(con)</span><br><span class="line">    </span><br><span class="line">old_f.close()</span><br><span class="line">new_f.close()</span><br></pre></td></tr></table></figure></li></ol><h1 id="文件和文件夹的操作"><a href="#文件和文件夹的操作" class="headerlink" title="文件和文件夹的操作"></a>文件和文件夹的操作</h1><p>在python中文件和文件夹的操作要借助os模板里面的相关功能，具体步骤如下：</p><ol><li><p>导入os模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure></li><li><p>使用os模块相关功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.函数名()</span><br></pre></td></tr></table></figure></li></ol><h2 id="文件重命名"><a href="#文件重命名" class="headerlink" title="文件重命名"></a>文件重命名</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rename(目标文件名, 新文件名)</span><br></pre></td></tr></table></figure><h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.remove(目标文件名)</span><br></pre></td></tr></table></figure><h2 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir(文件夹名字)</span><br></pre></td></tr></table></figure><h2 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rmdir(文件夹名字)</span><br></pre></td></tr></table></figure><h2 id="获取当前目录"><a href="#获取当前目录" class="headerlink" title="获取当前目录"></a>获取当前目录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure><h2 id="改变默认目录"><a href="#改变默认目录" class="headerlink" title="改变默认目录"></a>改变默认目录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(目录)</span><br></pre></td></tr></table></figure><p><strong>需求</strong>：在A文件夹里创建B文件夹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">'A'</span>)</span><br><span class="line">os.mkdir(<span class="string">'B'</span>)</span><br></pre></td></tr></table></figure><h2 id="获取目录列表"><a href="#获取目录列表" class="headerlink" title="获取目录列表"></a>获取目录列表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.listdir(目录) <span class="comment">#获取该目录下的所有文件，返回一个列表</span></span><br></pre></td></tr></table></figure><p><strong>例子</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(os.listdir(<span class="string">'A'</span>)) <span class="comment"># B</span></span><br></pre></td></tr></table></figure><h1 id="读取JSON文件"><a href="#读取JSON文件" class="headerlink" title="读取JSON文件"></a>读取JSON文件</h1><p>我们使用Python中的json模块就可以将字典或列表以JSON格式保存到文件中，代码如下所示。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    mydict = &#123;</span><br><span class="line">        <span class="string">'name'</span>: <span class="string">'张三'</span>,</span><br><span class="line">        <span class="string">'age'</span>: <span class="number">38</span>,</span><br><span class="line">        <span class="string">'qq'</span>: <span class="number">957658</span>,</span><br><span class="line">        <span class="string">'friends'</span>: [<span class="string">'王大锤'</span>, <span class="string">'白元芳'</span>],</span><br><span class="line">        <span class="string">'cars'</span>: [</span><br><span class="line">            &#123;<span class="string">'brand'</span>: <span class="string">'BYD'</span>, <span class="string">'max_speed'</span>: <span class="number">180</span>&#125;,</span><br><span class="line">            &#123;<span class="string">'brand'</span>: <span class="string">'Audi'</span>, <span class="string">'max_speed'</span>: <span class="number">280</span>&#125;,</span><br><span class="line">            &#123;<span class="string">'brand'</span>: <span class="string">'Benz'</span>, <span class="string">'max_speed'</span>: <span class="number">320</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'data.json'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fs:</span><br><span class="line">            json.dump(mydict, fs)</span><br><span class="line">    <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">        print(e)</span><br><span class="line">    print(<span class="string">'保存数据完成!'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>json模块主要有四个比较重要的函数，分别是：</p><ul><li><code>dump</code> - 将Python对象按照JSON格式序列化到文件中</li><li><code>dumps</code> - 将Python对象处理成JSON格式的字符串</li><li><code>load</code> - 将文件中的JSON数据反序列化成对象</li><li><code>loads</code> - 将字符串的内容反序列化成Python对象</li></ul><p>这里出现了两个概念，一个叫序列化，一个叫反序列化。自由的百科全书<a href="https://zh.wikipedia.org/" target="_blank" rel="noopener">维基百科</a>上对这两个概念是这样解释的：</p><ul><li>序列化（serialization）在计算机科学的数据处理中，是指将数据结构或对象状态转换为可以存储或传输的形式，这样在需要的时候能够恢复到原先的状态，而且通过序列化的数据重新获取字节时，可以利用这些字节来产生原始对象的副本（拷贝）。</li><li>与这个过程相反的动作，即从一系列字节中提取数据结构的操作，就是反序列化（deserialization）”。</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;函数&lt;/strong&gt;基本知识，本篇总结python中&lt;strong&gt;文件&lt;/strong&gt;的相关操作。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_6(函数lambda高阶用法)</title>
    <link href="http://icewind-r.github.io/2020/06/23/Python-6/"/>
    <id>http://icewind-r.github.io/2020/06/23/Python-6/</id>
    <published>2020-06-23T09:13:23.000Z</published>
    <updated>2020-06-24T10:51:45.444Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>公共操作</strong>和简单的<strong>推导式</strong>运算，本次学习<strong>函数</strong>的相关知识。</p><a id="more"></a><hr><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="函数基本形式"><a href="#函数基本形式" class="headerlink" title="函数基本形式"></a>函数基本形式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    <span class="string">""" </span></span><br><span class="line"><span class="string">    说明文档内容</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    代码</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"><span class="comment"># 调用时，help(f)查看说明文档</span></span><br></pre></td></tr></table></figure><h2 id="局部变量和全局变量"><a href="#局部变量和全局变量" class="headerlink" title="局部变量和全局变量"></a>局部变量和全局变量</h2><p>如何在函数体内修改全局变量？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testA</span><span class="params">()</span>:</span></span><br><span class="line">    print(a)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testB</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#global 关键字声明a是全局变量</span></span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a = <span class="number">200</span></span><br><span class="line">    print(a)</span><br></pre></td></tr></table></figure><h2 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h2><ul><li><p>返回多个值，<code>return a,b</code>，默认是返回元组类型</p></li><li><p>return后面可以连接列表、元组或字典，以返回多个值</p></li></ul><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><p>调用有参数的函数时，参数可有多种方式写入。</p><h3 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_info</span><span class="params">(name, age, gender)</span>:</span></span><br><span class="line">    print()</span><br><span class="line"></span><br><span class="line">user_info(<span class="string">'Tom'</span>, <span class="number">20</span>, <span class="string">'男'</span>)</span><br><span class="line">user_info(<span class="string">'小明'</span>, gender=<span class="string">'男'</span>, age=<span class="number">16</span>)</span><br></pre></td></tr></table></figure><h3 id="缺省参数"><a href="#缺省参数" class="headerlink" title="缺省参数"></a><strong>缺省参数</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_info</span><span class="params">(name, age, gender=<span class="string">'男'</span>)</span>:</span></span><br><span class="line">    print()</span><br><span class="line"><span class="comment">#带有缺省值的参数可以不输入</span></span><br><span class="line">user_info(<span class="string">'Tom'</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure><h3 id="不定长参数"><a href="#不定长参数" class="headerlink" title="不定长参数"></a>不定长参数</h3><ul><li>包裹位置传递</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_info</span><span class="params">(*args)</span>:</span></span><br><span class="line">    print(args)</span><br><span class="line">    </span><br><span class="line">user_info(<span class="string">'Tom'</span>, <span class="number">18</span>) <span class="comment"># ('Tom',18)</span></span><br></pre></td></tr></table></figure><blockquote><p>注意：传进的所有参数都会被args变量收集，它会根据传进参数的位置合并为一个元组（tuple）。</p></blockquote><ul><li>包裹关键字传递</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_info</span><span class="params">(**kwargs)</span>:</span></span><br><span class="line">    print(kwargs)</span><br><span class="line">    </span><br><span class="line">user_info(name=<span class="string">'Tom'</span>,age=<span class="number">18</span>) <span class="comment"># &#123;'name': 'Tom','age': 18&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>综上：无论是包裹位置传递还是包裹关键字传递，都是一个组包的过程</p></blockquote><h2 id="拆包"><a href="#拆包" class="headerlink" title="拆包"></a>拆包</h2><ul><li><p>元组拆包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">return_num</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span>, <span class="number">200</span></span><br><span class="line"></span><br><span class="line">num1, num2 = return_num()</span><br></pre></td></tr></table></figure></li><li><p>字典拆包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'name'</span>: <span class="string">'Tom'</span>, <span class="string">'age'</span>: <span class="number">18</span>&#125;</span><br><span class="line">a, b = dict1</span><br><span class="line"></span><br><span class="line"><span class="comment">#对字典进行拆包，取出来的是字典的key</span></span><br><span class="line">print(a) <span class="comment"># name</span></span><br><span class="line">print(b) <span class="comment"># age</span></span><br><span class="line"></span><br><span class="line">print(dict1[a]) <span class="comment">#Tom</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="交换变量值"><a href="#交换变量值" class="headerlink" title="交换变量值"></a>交换变量值</h2><ul><li><p>定义第三变量传值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c = a</span><br><span class="line">a = b</span><br><span class="line">b = c</span><br></pre></td></tr></table></figure></li><li><p>方法二</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a, b = <span class="number">1</span>, <span class="number">2</span> <span class="comment"># 把1和2分别赋值给a和b</span></span><br><span class="line">b, a = a, b</span><br></pre></td></tr></table></figure></li></ul><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>在python中，值是靠引用传递的。</p><p>可以用方法<code>id(变量)</code> ，得到变量的地址</p><p>int数据类型不可变（数值改变地址改变），列表数据类型可变（数值改变地址不变）</p><h3 id="可变和不可变类型"><a href="#可变和不可变类型" class="headerlink" title="可变和不可变类型"></a>可变和不可变类型</h3><p>所谓可变不可变：即该数据能否直接修改，如果直接修改那么可变（不改变内存地址），否则不可变。</p><ul><li>可变类型<ul><li>列表</li><li>字典</li><li>集合</li></ul></li><li>不可变类型<ul><li>整型</li><li>浮点型</li><li>字符串</li><li>元组</li></ul></li></ul><h1 id="lambda表达式（匿名函数）"><a href="#lambda表达式（匿名函数）" class="headerlink" title="lambda表达式（匿名函数）"></a>lambda表达式（匿名函数）</h1><p>如果一个函数有一个返回值，并且只有一句代码，可以使用lambda简化。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> 参数列表 : 表达式</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><ul><li><p>lambda表达式的参数可有可无，函数的参数在lambda表达式中完全适用</p></li><li><p>lambda表达式能接受任何数量的参数但只能返回一个表达式的值</p></li></ul></blockquote><h2 id="lambda的参数形式"><a href="#lambda的参数形式" class="headerlink" title="lambda的参数形式"></a>lambda的参数形式</h2><h3 id="无参数"><a href="#无参数" class="headerlink" title="无参数"></a>无参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#lambda表达式</span></span><br><span class="line">fn2 = <span class="keyword">lambda</span>: <span class="number">100</span></span><br><span class="line">print(fn2) <span class="comment"># lambda内存地址</span></span><br><span class="line">print(fn2()) <span class="comment"># 对应的函数的返回值</span></span><br></pre></td></tr></table></figure><h3 id="有参"><a href="#有参" class="headerlink" title="有参"></a>有参</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算a + b</span></span><br><span class="line"><span class="comment"># 函数实现</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">print(add(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#lambda实现</span></span><br><span class="line">fn1 = <span class="keyword">lambda</span> a, b: a + b</span><br><span class="line">print(fn1(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure><h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn1 = <span class="keyword">lambda</span> a = <span class="number">0</span>, b = <span class="number">0</span>: a + b</span><br></pre></td></tr></table></figure><h3 id="可变参数：-args"><a href="#可变参数：-args" class="headerlink" title="可变参数：*args"></a>可变参数：*args</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fn1 = <span class="keyword">lambda</span> *args: args</span><br><span class="line">print(fn1(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure><blockquote><p>注意：这里的可变参数传入到lambda中，返回的类型为元组</p></blockquote><h3 id="可变参数：-kwargs"><a href="#可变参数：-kwargs" class="headerlink" title="可变参数：**kwargs"></a>可变参数：**kwargs</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fn1 = <span class="keyword">lambda</span> **kwargs: kwargs</span><br><span class="line">print(fn1(name = <span class="string">'python'</span>, age = <span class="number">20</span>))</span><br></pre></td></tr></table></figure><blockquote><p>返回字典类型。</p></blockquote><p>以上与函数部分的规则完全一致。</p><h2 id="lambda的应用"><a href="#lambda的应用" class="headerlink" title="lambda的应用"></a>lambda的应用</h2><h3 id="带判断的lambda"><a href="#带判断的lambda" class="headerlink" title="带判断的lambda"></a>带判断的lambda</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fn1 = <span class="keyword">lambda</span> a, b: a <span class="keyword">if</span> a &gt; b <span class="keyword">else</span> b</span><br><span class="line">print(fn1(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure><h3 id="列表数据按字典key的值排序"><a href="#列表数据按字典key的值排序" class="headerlink" title="列表数据按字典key的值排序"></a>列表数据按字典key的值排序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">students = [</span><br><span class="line">    &#123;<span class="string">'name'</span>:<span class="string">'Tom'</span>, <span class="string">'age'</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">'name'</span>:<span class="string">'Rose'</span>, <span class="string">'age'</span>: <span class="number">19</span>&#125;,</span><br><span class="line">    &#123;<span class="string">'name'</span>:<span class="string">'Jack'</span>, <span class="string">'age'</span>: <span class="number">22</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按name值升序排序</span></span><br><span class="line">students.sort(key = <span class="keyword">lambda</span> x: x[<span class="string">'name'</span>])</span><br><span class="line">print(students)</span><br><span class="line"><span class="comment"># sort函数：如果要排序的列表里数据为字典，则指定key值则可排序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按name值降序排序</span></span><br><span class="line">students.sort(key = <span class="keyword">lambda</span> x: x[<span class="string">'name'</span>], reverse = <span class="literal">True</span>)</span><br><span class="line">print(students)</span><br></pre></td></tr></table></figure><h1 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h1><p>把函数作为参数传入，这样的函数为高阶函数。高阶函数是函数式编程的体现，高度抽象的编程范式。</p><p><strong>示例</strong>：任意两个数字，求绝对值abs（或四舍五入 round）后进行求和。</p><ul><li><p>方法1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_num</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> abs(a) + abs(b)</span><br><span class="line">result = add_num(<span class="number">-1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li><p>方法2</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_num</span><span class="params">(a, b, f)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> f(a) + f(b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#灵活性变高</span></span><br><span class="line">result = sum_num(<span class="number">-1</span>, <span class="number">2</span>, abs)</span><br><span class="line">result = sum_num(<span class="number">-1</span>, <span class="number">2</span>, round)</span><br></pre></td></tr></table></figure></li></ul><h2 id="内置高阶函数"><a href="#内置高阶函数" class="headerlink" title="内置高阶函数"></a>内置高阶函数</h2><h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p><code>map(func, lst)</code>，将传入的函数变量func作用到lst变量的每个元素中，并将结果组成新的迭代器返回。</p><p><strong>例子：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x ** <span class="number">2</span></span><br><span class="line">result = map(func, list1) </span><br><span class="line">print(result) <span class="comment">#为地址</span></span><br><span class="line">print(list(result)) <span class="comment"># list()，将数据转换为列表 [1, 4, 9, 16, 25]</span></span><br></pre></td></tr></table></figure><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h3><p><code>reduce(func, lst)</code>，其中func必须有<strong>两个</strong>参数。每次func计算的结果继续和序列的下一个元素做累计计算。</p><p><strong>例子：</strong>计算list1序列中各个数字的累加和</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools <span class="comment"># 导入reduce所需的functools模块</span></span><br><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">result = functools.reduce(func, list1)</span><br><span class="line">print(result) <span class="comment"># 15</span></span><br></pre></td></tr></table></figure><h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><p><code>filter(func,lst)</code>函数用于过滤序列，过滤掉不符合条件的元素，返回一个filter对象，如果转换为列表类型，用<code>list()</code>来转换。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line"></span><br><span class="line">result = filter(func, list1)</span><br><span class="line"></span><br><span class="line">print(result) <span class="comment"># filter对象</span></span><br><span class="line">print(list(result)) <span class="comment"># [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;公共操作&lt;/strong&gt;和简单的&lt;strong&gt;推导式&lt;/strong&gt;运算，本次学习&lt;strong&gt;函数&lt;/strong&gt;的相关知识。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_5(公共操作推导式)</title>
    <link href="http://icewind-r.github.io/2020/06/23/Python-5/"/>
    <id>http://icewind-r.github.io/2020/06/23/Python-5/</id>
    <published>2020-06-23T01:29:50.000Z</published>
    <updated>2020-06-24T10:52:37.250Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>字典</strong>和<strong>集合</strong>，本次总结python中的一些<strong>公共操作</strong>和简单的<strong>推导式</strong>运算。</p><a id="more"></a><hr><h1 id="一、公共操作"><a href="#一、公共操作" class="headerlink" title="一、公共操作"></a>一、公共操作</h1><h2 id="1、运算符"><a href="#1、运算符" class="headerlink" title="1、运算符"></a>1、运算符</h2><table><thead><tr><th>运算符</th><th>描述</th><th>支持的容器类型</th></tr></thead><tbody><tr><td>+</td><td>合并</td><td>字符串、列表、元组</td></tr><tr><td>*</td><td>复制</td><td>字符串、列表、元组</td></tr><tr><td>in</td><td>元素是否存在</td><td>字符串、列表、元组、字典</td></tr><tr><td>not in</td><td>元素是否不存在</td><td>字符串、列表、元组、字典</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># *复制运算符</span></span><br><span class="line">str = <span class="string">'hello'</span></span><br><span class="line">list = [<span class="string">'world'</span>]</span><br><span class="line">t = (<span class="string">'world'</span>,)</span><br><span class="line">print(str * <span class="number">5</span>) <span class="comment"># 'hellohellohellohellohello'</span></span><br><span class="line">print(list * <span class="number">5</span>) <span class="comment"># ['world','world','world','world','world']</span></span><br><span class="line">print(t * <span class="number">5</span>) <span class="comment"># ('world','world','world','world','world')</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">'h'</span> <span class="keyword">in</span> str) <span class="comment"># True</span></span><br></pre></td></tr></table></figure><h2 id="2、公共方法"><a href="#2、公共方法" class="headerlink" title="2、公共方法"></a>2、公共方法</h2><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>len()</td><td>计算容器中元素个数</td></tr><tr><td>del 或 del()</td><td>删除</td></tr><tr><td>max()</td><td>返回容器中元素最大值</td></tr><tr><td>min()</td><td>返回容器中元素最小值</td></tr><tr><td>range(start,end,step)</td><td>生成从start到end的数字（可迭代对象），步长为step，供for循环使用</td></tr><tr><td>enumerate()</td><td>函数用于将一个可遍历的数据对象（如列表、元组或字符串）组合为一个索引序列，同时列出数据和数据下标，一般在for循环当中。</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'hello'</span></span><br><span class="line">list = [<span class="string">'world'</span>]</span><br><span class="line">t = (<span class="string">'world'</span>,)</span><br><span class="line">s = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">dict = &#123;<span class="string">'name'</span>:<span class="string">'Tom'</span>,<span class="string">'age'</span>:<span class="number">20</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="len-和-del"><a href="#len-和-del" class="headerlink" title="len() 和 del()"></a>len() 和 del()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">len(str) <span class="comment"># 5</span></span><br><span class="line">len(dict) <span class="comment">#2 字典的一个键值对记为长度1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span>(str)</span><br><span class="line"><span class="keyword">del</span>(dict[<span class="string">'name'</span>])</span><br></pre></td></tr></table></figure><h3 id="max-和-min"><a href="#max-和-min" class="headerlink" title="max() 和 min()"></a>max() 和 min()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">max(str)</span><br><span class="line">min(s)</span><br></pre></td></tr></table></figure><h3 id="range"><a href="#range" class="headerlink" title="range()"></a>range()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 2 3 4 5 6 7 8 9</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>,<span class="number">1</span>):</span><br><span class="line">    print(i)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 1 3 5 7 9</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>):</span><br><span class="line">    print(i)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><blockquote><p>注意：range()生成的序列不包含end数字。</p><p>如果不写开始，默认从0开始</p><p>如果不写步长，默认为1</p></blockquote><h3 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate()"></a>enumerate()</h3><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enumerate(可遍历对象,start = <span class="number">0</span>)</span><br></pre></td></tr></table></figure><blockquote><p>注意：start参数用来设置遍历数据的下标的起始值，默认为0。</p></blockquote></li><li><p>enumerate 返回结果是元组，元组第一个数据是原迭代对象的数据对应的下标，第二个为对应的 数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> enumerate(list):</span><br><span class="line">    print(i)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> index, char <span class="keyword">in</span> enumerate(list, start = <span class="number">1</span>):</span><br><span class="line">    print(<span class="string">f'下标是<span class="subst">&#123;index&#125;</span>，对应的字符是<span class="subst">&#123;char&#125;</span>'</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="3、容器类型转换"><a href="#3、容器类型转换" class="headerlink" title="3、容器类型转换"></a>3、容器类型转换</h2><h3 id="tuple"><a href="#tuple" class="headerlink" title="tuple()"></a>tuple()</h3><p>作用：将某个序列转换成元组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">s = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">tuple(list) <span class="comment"># (1,2,3)</span></span><br></pre></td></tr></table></figure><h1 id="二、推导式"><a href="#二、推导式" class="headerlink" title="二、推导式"></a>二、推导式</h1><p>作用：主要为化简代码。</p><h2 id="1、列表推导式"><a href="#1、列表推导式" class="headerlink" title="1、列表推导式"></a>1、列表推导式</h2><p>作用：用一个表达式创建一个有规律的列表或控制一个有规律的列表。</p><h4 id="1、带for循环的列表推导式"><a href="#1、带for循环的列表推导式" class="headerlink" title="1、带for循环的列表推导式"></a>1、带for循环的列表推导式</h4><p>例题：创建从0~9的顺序列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line">print(list)</span><br></pre></td></tr></table></figure><h4 id="2、带if的列表推导式"><a href="#2、带if的列表推导式" class="headerlink" title="2、带if的列表推导式"></a>2、带if的列表推导式</h4><p>例题：创建从0~9的偶数列表</p><ul><li><p>方法1：range()步长实现</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>,<span class="number">2</span>)]</span><br></pre></td></tr></table></figure></li><li><p>方法2：if实现</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>) <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>]</span><br></pre></td></tr></table></figure></li></ul><h4 id="3、多个for循环实现列表推导式"><a href="#3、多个for循环实现列表推导式" class="headerlink" title="3、多个for循环实现列表推导式"></a>3、多个for循环实现列表推导式</h4><p>例题：创建列表如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(<span class="number">1</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">1</span>),(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">0</span>),(<span class="number">2</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="number">2</span>)]</span><br></pre></td></tr></table></figure><p>代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 普通实现</span></span><br><span class="line">list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">3</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        list.append((i,j)) <span class="comment">#列表里添加元组</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">#推导式</span></span><br><span class="line">list = [(i,j) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">3</span>)]</span><br></pre></td></tr></table></figure><blockquote><p>将普通实现的方法按照顺序写入列表方括号里，输出项提前即可</p></blockquote><h2 id="2、字典推导式"><a href="#2、字典推导式" class="headerlink" title="2、字典推导式"></a>2、字典推导式</h2><p>作用：快速合并列表为字典或提取字典中目标数据</p><p>案例：</p><p>1、创建一个字典：字典key是1-5，value是这个数的平方</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;i : i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>)&#125; <span class="comment">#&#123;1: 1, 2: 4, 3: 9, 4: 16&#125;</span></span><br></pre></td></tr></table></figure><p>2、将两个列表合并为一个字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">'name'</span>,<span class="string">'age'</span>,<span class="string">'gender'</span>]</span><br><span class="line">list2 = [<span class="string">'Tom'</span>,<span class="number">20</span>,<span class="string">'男'</span>]</span><br><span class="line">dict = &#123;list1[i]: list2[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(len(list1))&#125;</span><br></pre></td></tr></table></figure><p>3、提取字典中的目标数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">counts = &#123;<span class="string">'MBP'</span>: <span class="number">268</span>, <span class="string">'HP'</span>: <span class="number">125</span>, <span class="string">'DELL'</span>: <span class="number">201</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#需求：提取上述电脑数量大于等于200的字典数据</span></span><br><span class="line">count1 = &#123;key: value <span class="keyword">for</span> key, value <span class="keyword">in</span> counts.items() <span class="keyword">if</span> value &gt;= <span class="number">200</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="3、集合推导式"><a href="#3、集合推导式" class="headerlink" title="3、集合推导式"></a>3、集合推导式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="comment">#需求：创建一个集合，数据为下方列表的2次方</span></span><br><span class="line">set1 = &#123;<span class="number">1</span> ** <span class="number">2</span> <span class="keyword">for</span> <span class="keyword">in</span> list1&#125; <span class="comment">#&#123;1, 4&#125; 集合的去重功能</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;字典&lt;/strong&gt;和&lt;strong&gt;集合&lt;/strong&gt;，本次总结python中的一些&lt;strong&gt;公共操作&lt;/strong&gt;和简单的&lt;strong&gt;推导式&lt;/strong&gt;运算。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python_4(字典元组)</title>
    <link href="http://icewind-r.github.io/2020/06/22/Python-4/"/>
    <id>http://icewind-r.github.io/2020/06/22/Python-4/</id>
    <published>2020-06-22T11:52:42.000Z</published>
    <updated>2020-06-29T06:29:45.256Z</updated>
    
    <content type="html"><![CDATA[<p>基于上次的<strong>列表</strong>和<strong>元组</strong>，这次总结<strong>字典</strong>和<strong>集合</strong>的基本操作</p><a id="more"></a><hr><h1 id="一、字典"><a href="#一、字典" class="headerlink" title="一、字典"></a>一、字典</h1><p>字典的数据是以键值对形式出现。</p><h2 id="1、创建字典"><a href="#1、创建字典" class="headerlink" title="1、创建字典"></a>1、创建字典</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'Tom'</span>,<span class="string">'age'</span>:<span class="number">20</span>,<span class="string">'gender'</span>:<span class="string">'男'</span>&#125; <span class="comment">#有数据字典</span></span><br><span class="line">dict2 = &#123;&#125; <span class="comment">#空字典</span></span><br><span class="line">dict3 = dict() <span class="comment">#空字典</span></span><br></pre></td></tr></table></figure><h2 id="2、字典常见操作"><a href="#2、字典常见操作" class="headerlink" title="2、字典常见操作"></a>2、字典常见操作</h2><h3 id="增加"><a href="#增加" class="headerlink" title="增加"></a>增加</h3><p>写法：<code>字典序列[key] = 值</code></p><blockquote><p>注意：如果key存在则修改这个key对应的值；如果key不存在则新增此键值对</p></blockquote><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><ul><li>del() / del：删除字典或字典中指定键值对</li><li>clear()：清空字典</li></ul><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p>字典序列[key] = 值</p><h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><h4 id="key值查找"><a href="#key值查找" class="headerlink" title="key值查找"></a>key值查找</h4><p><code>dict1[&#39;name&#39;]</code></p><blockquote><p>如果key存在则返回相应值；否则报错</p></blockquote><h4 id="get"><a href="#get" class="headerlink" title="get()"></a>get()</h4><ul><li><p>语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字典序列.get(key, 默认值)</span><br></pre></td></tr></table></figure><blockquote><p>注意：如果当前查找的key不存在，则返回第二个参数，如果省略第二个参数，则返回None</p></blockquote></li></ul><h4 id="keys"><a href="#keys" class="headerlink" title="keys()"></a>keys()</h4><p>查找字典中所有的key，返回可迭代对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(dict1.keys()) <span class="comment"># dict_keys(['name','age','gender'])</span></span><br></pre></td></tr></table></figure><h4 id="values"><a href="#values" class="headerlink" title="values()"></a>values()</h4><p>查找字典中所有的value，返回可迭代对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(dict1.values()) <span class="comment"># dict_values(['Tom','20','男'])</span></span><br></pre></td></tr></table></figure><h4 id="items"><a href="#items" class="headerlink" title="items()"></a>items()</h4><p>查找字典中所有的键值对，返回可迭代对象，里面的数据是元组，元组数据1是key，2是value</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(dict1.items()) <span class="comment"># dict_items([('name','Tom'),('age',20),('gender','男')])</span></span><br></pre></td></tr></table></figure><h2 id="3、字典的循环遍历"><a href="#3、字典的循环遍历" class="headerlink" title="3、字典的循环遍历"></a>3、字典的循环遍历</h2><h3 id="遍历字典的key"><a href="#遍历字典的key" class="headerlink" title="遍历字典的key"></a>遍历字典的key</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> dict1.keys():</span><br><span class="line">    print(key)</span><br><span class="line"><span class="comment"># 结果：name age gender</span></span><br></pre></td></tr></table></figure><h3 id="遍历字典的value"><a href="#遍历字典的value" class="headerlink" title="遍历字典的value"></a>遍历字典的value</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> dict1.values():</span><br><span class="line">print(value)</span><br><span class="line"><span class="comment"># 结果 Tom 20 男</span></span><br></pre></td></tr></table></figure><h3 id="遍历字典的元素"><a href="#遍历字典的元素" class="headerlink" title="遍历字典的元素"></a>遍历字典的元素</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> dict1.items():</span><br><span class="line">    print(item)</span><br><span class="line">结果 (<span class="string">'name'</span>,<span class="string">'tom'</span>) (<span class="string">'age'</span>,<span class="number">20</span>) (<span class="string">'gender'</span>,<span class="string">'男'</span>)</span><br></pre></td></tr></table></figure><h3 id="遍历字典的键值对-拆包"><a href="#遍历字典的键值对-拆包" class="headerlink" title="遍历字典的键值对(拆包)"></a>遍历字典的键值对(拆包)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> dict1.items():</span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;key&#125;</span> = <span class="subst">&#123;value&#125;</span>'</span>)</span><br></pre></td></tr></table></figure><h1 id="二、集合"><a href="#二、集合" class="headerlink" title="二、集合"></a>二、集合</h1><h2 id="1、创建集合"><a href="#1、创建集合" class="headerlink" title="1、创建集合"></a>1、创建集合</h2><p>创建集合使用<code>{}</code>或<code>set()</code>，但是如果要创建空集合只能使用set()，因为<code>{}</code>用来创建空字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">s2 = set(<span class="string">'ads'</span>)</span><br><span class="line">s3 = set() <span class="comment"># set</span></span><br><span class="line">s4 = &#123;&#125; <span class="comment">#dict</span></span><br></pre></td></tr></table></figure><h2 id="2、操作"><a href="#2、操作" class="headerlink" title="2、操作"></a>2、操作</h2><h3 id="增加-1"><a href="#增加-1" class="headerlink" title="增加"></a>增加</h3><ul><li><p>add()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">s1.add(<span class="number">3</span>)</span><br><span class="line">s1.add(<span class="number">1</span>) <span class="comment"># &#123;1,2,3&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>集合有去重功能，所以当向集合内追加的数据是当前集合已有数据的话，则不进行任何操作。</p></blockquote></li><li><p>update()：追加的数据是序列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">s1.update(<span class="number">3</span>) <span class="comment">#报错 </span></span><br><span class="line">s1.update([<span class="number">100</span>,<span class="number">200</span>])</span><br><span class="line">s1.update(<span class="string">'abc'</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h3><ul><li>remove()：删除指定数据，如果数据不存在报错</li><li>discard()：删除指定数据，如果数据不存在不报错</li><li>pop()：随机删除某个数据，并返回该值</li></ul><h3 id="查找-1"><a href="#查找-1" class="headerlink" title="查找"></a>查找</h3><ul><li>in</li><li>not in</li></ul><h2 id="3、交并补"><a href="#3、交并补" class="headerlink" title="3、交并补"></a>3、交并补</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 集合的交集、并集、差集、对称差运算</span></span><br><span class="line">print(set1 &amp; set2)</span><br><span class="line"><span class="comment"># print(set1.intersection(set2))</span></span><br><span class="line">print(set1 | set2)</span><br><span class="line"><span class="comment"># print(set1.union(set2))</span></span><br><span class="line">print(set1 - set2)</span><br><span class="line"><span class="comment"># print(set1.difference(set2))</span></span><br><span class="line">print(set1 ^ set2)</span><br><span class="line"><span class="comment"># print(set1.symmetric_difference(set2))</span></span><br><span class="line"><span class="comment"># 判断子集和超集</span></span><br><span class="line">print(set2 &lt;= set1)</span><br><span class="line"><span class="comment"># print(set2.issubset(set1))</span></span><br><span class="line">print(set3 &lt;= set1)</span><br><span class="line"><span class="comment"># print(set3.issubset(set1))</span></span><br><span class="line">print(set1 &gt;= set2)</span><br><span class="line"><span class="comment"># print(set1.issuperset(set2))</span></span><br><span class="line">print(set1 &gt;= set3)</span><br><span class="line"><span class="comment"># print(set1.issuperset(set3))</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基于上次的&lt;strong&gt;列表&lt;/strong&gt;和&lt;strong&gt;元组&lt;/strong&gt;，这次总结&lt;strong&gt;字典&lt;/strong&gt;和&lt;strong&gt;集合&lt;/strong&gt;的基本操作&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://iceWind-R.github.io/categories/Python/"/>
    
    
      <category term="Learning" scheme="http://iceWind-R.github.io/tags/Learning/"/>
    
      <category term="Python" scheme="http://iceWind-R.github.io/tags/Python/"/>
    
  </entry>
  
</feed>
